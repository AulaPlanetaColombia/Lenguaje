/* VERSION 2015.12.22.1 */
function Boton(e,t,i,n,a){this.width=e,this.height=t;var s=new Image;s.src=pppPreloader.from("module",i);var o={images:[s],frames:{width:e,height:t},animations:{normal:[0],hover:[1]}},r=new createjs.SpriteSheet(o);this.bt=new createjs.Sprite(r),this.bt.on("mouseover",function(e){this.gotoAndStop("hover"),document.body.style.cursor="pointer"}),this.bt.on("mouseout",function(e){this.gotoAndStop("normal"),document.body.style.cursor="default"}),this.bt.gotoAndStop("normal"),this.label=new createjs.RichText,this.label.font="bold 12px Arial",this.label.color="#0D3158",this.label.text=n,this.label.mouseEnabled=!1,"left"==a?this.label.x=10:"center"==a&&(this.label.x=(e-this.label.getMeasuredWidth())/2),this.label.y=7,this.contenedor=new createjs.Container,this.contenedor.addChild(this.bt),this.contenedor.addChild(this.label)}function moreInfoPanell(e){this.fons=new createjs.Shape,this.fons.graphics.beginFill("#000").drawRect(0,0,950,567),this.fons.y=41,this.fons.alpha=.2,this.banda_superior=new createjs.Shape,this.banda_superior.graphics.beginFill("#0D3158").drawRect(0,0,650,32),this.banda_superior.x=150,this.banda_superior.y=100,this.banda_central=new createjs.Shape,this.banda_central.graphics.beginFill("#fff").drawRect(0,0,650,405),this.banda_central.x=150,this.banda_central.y=132,this.banda_inferior=new createjs.Shape,this.banda_inferior.graphics.beginFill("#0D3158").drawRect(0,0,650,13),this.banda_inferior.x=150,this.banda_inferior.y=537;var t=new Image;t.src=pppPreloader.from("module","motor/images/tancar.png"),t.name="tancar",this.tancar=new createjs.Bitmap(t),this.tancar.x=773,this.tancar.y=105,this.titol=new createjs.RichText,this.titol.font="18px Arial",this.titol.color="#fff",this.titol.text=LangRes.lang[LangRes.MASINFORMACION],this.titol.x=160,this.titol.y=105,this.titol.lineWidth=600,this.titol.mouseEnabled=!1,this.contenedor=new createjs.Container,this.contenedor.x=0,this.contenedor.y=0,this.inputDOM0=new createjs.DOMElementCustom("input_moreInfo",this.contenedor),this.inputDOM0.element_x=160,this.inputDOM0.element_y=140,this.inputDOM0.fontsize=18,this.inputDOM0.element_width=615,this.inputDOM0.element_height=370,this.inputDOM0.x=this.inputDOM0.element_x,this.inputDOM0.y=this.inputDOM0.element_y,$(this.inputDOM0.htmlElement).css("width",this.inputDOM0.element_width),$(this.inputDOM0.htmlElement).css("height",this.inputDOM0.element_height),this.contenedor.addChild(this.inputDOM0),this.contenedor.addChild(this.fons),this.contenedor.addChild(this.banda_superior),this.contenedor.addChild(this.banda_central),this.contenedor.addChild(this.banda_inferior),this.contenedor.addChild(this.tancar),this.contenedor.addChild(this.titol),this.contenedor.addChild(this.contingut),Main.stage.addChild(this.contenedor),this.contenedor.alpha=0,createjs.Tween.get(this.contenedor).to({alpha:1},1250,createjs.Ease.circOut)}function missatgePanell(e){this.fons=new createjs.Shape,this.fons.graphics.beginFill("#f8B334").drawRect(0,0,950,51),this.text=new createjs.RichText,this.text.font="15px Arial",this.text.color="#333333",this.text.text=e,this.text.x=15,this.text.y=e.length<75?15:8,this.text.lineWidth=530,this.text.lineHeight=20,this.text.mouseEnabled=!1,this.contenedor=new createjs.Container,this.contenedor.x=0,this.contenedor.y=558,this.aceptar=new Boton(144,28,pppPreloader.from("module","motor/images/btnAceptar.png"),LangRes.lang[LangRes.ACEPTAR],"center"),this.cancelar=new Boton(144,28,pppPreloader.from("module","motor/images/btnCancelar.png"),LangRes.lang[LangRes.CANCELAR],"center"),this.cancelar.contenedor.x=796,this.cancelar.contenedor.y=12,this.aceptar.contenedor.x=650,this.aceptar.contenedor.y=12,this.contenedor.addChild(this.fons),this.contenedor.addChild(this.text),this.contenedor.addChild(this.aceptar.contenedor),this.contenedor.addChild(this.cancelar.contenedor),Main.stage.removeChild(Contenedor.missatge.contenedor),Main.stage.addChild(this.contenedor),this.contenedor.alpha=0,createjs.Tween.get(this.contenedor).to({alpha:1},1250,createjs.Ease.circOut)}function confirmaPanell(e){this.fons=new createjs.Shape,this.fons.graphics.beginFill("#f8B334").drawRect(0,0,950,51),this.text=new createjs.RichText,this.text.font="15px Arial",this.text.color="#333333",this.text.text=e,this.text.x=15,this.text.y=8,this.text.lineWidth=530,this.text.lineHeight=20,this.text.mouseEnabled=!1,this.contenedor=new createjs.Container,this.contenedor.x=0,this.contenedor.y=558,this.corregir=new Boton(144,28,pppPreloader.from("module","motor/images/btnCorregir.png"),LangRes.lang[LangRes.CORREGIR],"center"),this.reiniciar=new Boton(144,28,pppPreloader.from("module","motor/images/btnReiniciar.png"),LangRes.lang[LangRes.REINICIAR],"center"),this.reiniciar.contenedor.x=796,this.reiniciar.contenedor.y=12,this.corregir.contenedor.x=650,this.corregir.contenedor.y=12,this.contenedor.addChild(this.fons),this.contenedor.addChild(this.text),this.contenedor.addChild(this.reiniciar.contenedor),this.contenedor.addChild(this.corregir.contenedor),Main.stage.removeChild(Contenedor.missatge.contenedor),Main.stage.addChild(this.contenedor),this.contenedor.alpha=0,createjs.Tween.get(this.contenedor).to({alpha:1},1250,createjs.Ease.circOut)}function resultatsPanell(e,t,i){this.fons=new createjs.Shape,this.fons.graphics.beginFill("#f8B334").drawRect(0,0,950,51),this.text1=new createjs.RichText,this.text1.font="bold 16px Arial",this.text1.color="#0D3158",this.text1.text=LangRes.lang[LangRes.RESPCORRECTAS],this.text1.x=15,this.text1.y=16,this.correctes=new createjs.RichText,this.correctes.font="34px Arial",this.correctes.color="#41A62A",this.correctes.text=e.toString(),this.correctes.x=1==e.toString().length?200:188,this.correctes.y=6,this.text2=new createjs.RichText,this.text2.font="14px Arial",this.text2.color="#0D3158",this.text2.text=LangRes.lang[LangRes.RESPCORRECTAS_DE],this.text2.x=230,this.text2.y=17,this.totals=new createjs.RichText,this.totals.font="34px Arial",this.totals.color="#0D3158",this.totals.text=t.toString(),this.totals.x=256,this.totals.y=6,this.text3=new createjs.RichText,this.text3.font="bold 16px Arial",this.text3.color="#0D3158",this.text3.text=LangRes.lang[LangRes.PUNTUACION],this.text3.x=300,this.text3.y=16,this.punts=new createjs.RichText,this.punts.font="34px Arial",this.punts.color="#0D3158";var n=e/t*10,a=Math.floor(n),s=n-a;0==s?this.punts.text=n.toString():this.punts.text=n.toFixed(1).toString().replace(".",","),this.punts.x=400,this.punts.y=6,this.contenedor=new createjs.Container,this.contenedor.x=0,this.contenedor.y=558,this.aceptar=new Boton(144,28,pppPreloader.from("module","motor/images/btnAceptar.png"),LangRes.lang[LangRes.ACEPTAR],"center"),this.aceptar.contenedor.x=796,this.aceptar.contenedor.y=14,this.contenedor.addChild(this.fons),this.contenedor.addChild(this.text1),this.contenedor.addChild(this.correctes),this.contenedor.addChild(this.totals),this.contenedor.addChild(this.punts),this.contenedor.addChild(this.text2),this.contenedor.addChild(this.text3),this.contenedor.addChild(this.aceptar.contenedor),(""!=Contenedor.datosXML.temps&&Contenedor.datosXML.temps>0&&Scorm.modo==Scorm.MODO_EXAMEN||""!=Contenedor.timeRevision&&Scorm.modo==Scorm.MODO_REVISAR)&&(this.text4=new createjs.RichText,this.text4.font="bold 16px Arial",this.text4.color="#0D3158",this.text4.text=LangRes.lang[LangRes.TIEMPOEMPLEADO],this.text4.x=480,this.text4.y=16,this.temps=new createjs.RichText,this.temps.font="34px Arial",this.temps.color="#0D3158",this.temps.text=i,this.temps.x=625,this.temps.y=6,this.contenedor.addChild(this.temps),this.contenedor.addChild(this.text4)),Main.stage.removeChild(Contenedor.missatge.contenedor),Main.stage.addChild(this.contenedor),this.contenedor.alpha=0,createjs.Tween.get(this.contenedor).to({alpha:1},1250,createjs.Ease.circOut)}function solucioPanell(e){this.fons=new createjs.Shape,this.fons.graphics.beginFill("#0D3158").drawRect(0,0,950,51),this.contenedor=new createjs.Container,this.contenedor.x=0,this.contenedor.y=558,this.currentPag=Motor.currentNumPag,this.numPagines=e,this.reintentar=new Boton(146,29,pppPreloader.from("module","motor/images/btnRestaurar.png"),LangRes.lang[LangRes.REINTENTAR],"left"),this.solucio=new Boton(148,29,pppPreloader.from("module","motor/images/btnSolucio.png"),LangRes.lang[LangRes.SOLUCION],"left"),this.solucio.contenedor.x=786,this.solucio.contenedor.y=12,this.reintentar.contenedor.x=15,this.reintentar.contenedor.y=12,this.contenedor.addChild(this.fons),this.contenedor.addChild(this.text),this.contenedor.addChild(this.solucio.contenedor),Scorm.modo!=Scorm.MODO_REVISAR&&this.contenedor.addChild(this.reintentar.contenedor),this.pagines="",this.numPagines>1&&(this.pagines=new Paginador(this.numPagines),this.pagines.contenedor.x=315,this.pagines.contenedor.y=11,this.seguent=new Boton(144,28,pppPreloader.from("module","motor/images/btnSeguent.png"),LangRes.lang[LangRes.SIGUIENTE],"left"),this.seguent.contenedor.x=285+31*this.numPagines+40,this.seguent.contenedor.y=12,this.contenedor.addChild(this.pagines.contenedor),this.contenedor.addChild(this.seguent.contenedor),this.pagines.pags[this.currentPag].state("select"),this.currentPag==this.numPagines-1&&(this.seguent.contenedor.visible=!1)),Main.stage.removeChild(Contenedor.missatge.contenedor),Main.stage.addChild(this.contenedor),this.contenedor.alpha=0,createjs.Tween.get(this.contenedor).to({alpha:1},1250,createjs.Ease.circOut),this.numPagines>1&&(this.validaPags(),this.selectPag(this.currentPag+1))}function PagBase(e,t){this.bt=new createjs.Container,this.num=e+1,this.contestada=0,this.fons=new createjs.Shape,this.src=t,"inici"==t?this.fons.graphics.beginFill("#556f8a").drawRoundRectComplex(1,1,28,28,6,0,0,6):"fi"==t?this.fons.graphics.beginFill("#556f8a").drawRoundRectComplex(1,1,28,28,0,6,6,0):this.fons.graphics.beginFill("#556f8a").drawRoundRectComplex(1,1,28,28,0,0,0,0),this.numero=new createjs.RichText,this.numero.font="18px Arial",this.numero.color="#0D3158",this.numero.text=this.num.toString(),this.numero.x=1==this.num.toString().length?10:4,this.numero.y=6,this.numero.mouseEnabled=!1,this.bt.addChild(this.fons),this.bt.addChild(this.numero),this.bt.on("mouseover",function(e){document.body.style.cursor="pointer"}),this.bt.on("mouseout",function(e){document.body.style.cursor="default"})}function Paginador(e){for(this.contenedor=new createjs.Container,this.pags=new Array,i=0;i<e;i++){var t="";t=0==i?new PagBase(i,"inici"):i==e-1?new PagBase(i,"fi"):new PagBase(i,"mig"),t.bt.x=30*i,t.bt.y=0,this.contenedor.addChild(t.bt),this.pags.push(t)}}function inicialPanell(e){this.fons=new createjs.Shape,this.fons.graphics.beginFill("#0D3158").drawRect(0,0,950,51),this.currentPag=Motor.currentNumPag,this.numPagines=e,this.contenedor=new createjs.Container,this.contenedor.x=0,this.contenedor.y=558,this.validar=new Boton(146,29,pppPreloader.from("module","motor/images/btnRestaurar.png"),LangRes.lang[LangRes.REINTENTAR],"left"),this.corregir=new Boton(146,28,pppPreloader.from("module","motor/images/btnValidar.png"),LangRes.lang[LangRes.CORREGIR],"left"),this.validar.contenedor.x=25,this.validar.contenedor.y=12,this.corregir.contenedor.x=169,this.corregir.contenedor.y=12,this.pagines="",this.numPagines>1&&(this.pagines=new Paginador(this.numPagines),this.pagines.contenedor.x=330,this.pagines.contenedor.y=11,this.seguent=new Boton(144,28,pppPreloader.from("module","motor/images/btnSeguent.png"),LangRes.lang[LangRes.SIGUIENTE],"left"),this.seguent.contenedor.x=300+31*this.numPagines+40,this.seguent.contenedor.y=12,this.currentPag==this.numPagines-1&&(this.seguent.contenedor.visible=!1)),this.contenedor.addChild(this.fons),this.contenedor.addChild(this.text),this.contenedor.addChild(this.validar.contenedor),this.contenedor.addChild(this.corregir.contenedor),this.numPagines>1&&(this.contenedor.addChild(this.pagines.contenedor),this.contenedor.addChild(this.seguent.contenedor),this.pagines.pags[this.currentPag].state("select")),Main.stage.removeChild(Contenedor.missatge.contenedor),Main.stage.addChild(this.contenedor),this.contenedor.alpha=0,createjs.Tween.get(this.contenedor).to({alpha:1},1250,createjs.Ease.circOut)}function Pagina(e,t){this.numpagina=t,this.enunciat=new createjs.RichText,this.enunciat.text=e.enunciado,this.video=e.video,this.salto=""!=e.salto?e.salto/25:0,this.enunciat.font=1==Contenedor.datosXML.plataforma.grado?"19px Arial":"17px Arial",this.enunciat.fontSize=1==Contenedor.datosXML.plataforma.grado?19:17,this.enunciat.color="#0D3158",this.enunciat.x=15,this.enunciat.y=10,this.enunciat.lineWidth=900,this.enunciat.lineHeight=22,this.enunciat.mask=new createjs.Shape,this.enunciat.mask.graphics.beginFill("#fff").drawRect(0,0,900,45),this.enunciat.mask.y=10,this.enunciat.mask.x=15,this.enunciat.mouseEnabled=!1,this.idPregunta=e.id,this.validacio=!0,this.respostes=new Array,this.explicacion=new createjs.RichText,this.explicacion.text=e.explicacion,this.explicacion.font=1==Contenedor.datosXML.plataforma.grado?"15px Arial":"13px Arial",this.explicacion.fontSize=1==Contenedor.datosXML.plataforma.grado?15:13,this.explicacion.color="#0D3158",this.explicacion.x=400,this.explicacion.y=355,this.explicacion.lineWidth=500,this.explicacion.lineHeight=21,this.explicacion.mask=new createjs.Shape,this.explicacion.mask.graphics.beginFill("#fff").drawRect(0,0,500,88),this.explicacion.mask.y=355,this.explicacion.mask.x=400,this.explicacion.mouseEnabled=!1,this.explicacion.visible=!1,this.contenedor=new createjs.Container,this.contenedor.addChild(this.enunciat),this.contenedor.addChild(this.explicacion);for(var i=e.respuestas.length,n=0;i>n;n++){var a=0;0==Contenedor.datosXML.sinaleatoriedad&&Scorm.modo!=Scorm.MODO_REVISAR&&Scorm.modo!=Scorm.MODO_REVISARALUMNO&&(a=Math.floor(Math.random()*e.respuestas.length));var s=e.respuestas[a];e.respuestas.splice(a,1);var o=new CheckBox(s,this,n);o.contenedor.y=90+280/i*n,o.contenedor.x=400,this.contenedor.addChild(o.contenedor),this.respostes.push(o)}}function CheckBox(e,t,i){this.correcte=e.correcte,this.checked=!1,this.repostaUnica=Contenedor.datosXML.respuestaunica,this.paginaPare=t,this.contenedor=new createjs.Container,this.id=i,this.idResposta=e.id,this.texte=new createjs.RichText,this.texte.text=e.text,this.texte.font=1==Contenedor.datosXML.plataforma.grado?"21px Arial":"18px Arial",this.texte.fontSize=1==Contenedor.datosXML.plataforma.grado?21:18,this.texte.color="#0D3158",this.texte.x=45,this.texte.y=2,this.texte.lineWidth=480,this.texte.lineHeight=22,this.texte.mask=new createjs.Shape,this.texte.mask.graphics.beginFill("#fff").drawRect(0,0,480,45),this.texte.mask.y=2,this.texte.mask.x=45,this.texte.mouseEnabled=!1,this.fonsText=new createjs.Shape,this.fonsText.graphics.beginFill("#fff").drawRoundRect(0,0,480,this.texte.getMeasuredHeight()+12,3),this.marcText=new createjs.Shape,this.marcText.graphics.beginStroke("#F8B334").setStrokeStyle(1).drawRoundRect(0,0,480,this.texte.getMeasuredHeight()+12,3),this.areaText=new createjs.Container,this.areaText.x=40,this.areaText.y=-3,this.areaText.addChild(this.fonsText),this.areaText.addChild(this.marcText),this.areaText.alpha=.01,this.area=new createjs.Container,this.fons=new createjs.Shape,this.fons.graphics.beginFill("#fff").drawRoundRect(0,0,30,30,3),this.marc=new createjs.Shape,this.marc.graphics.beginStroke("#F8B334").setStrokeStyle(1).drawRoundRect(0,0,30,30,3),this.ok=new createjs.Bitmap(pppPreloader.from("module","motor/images/check_ok.png")),this.ko=new createjs.Bitmap(pppPreloader.from("module","motor/images/check_ko.png")),this.ko.x=2,this.ko.y=0,this.chk=new createjs.Bitmap("motor/images/check_base.png"),this.buit=new createjs.DisplayObject,this.base=new createjs.Container,this.base.x=5,this.base.y=8,this.area.addChild(this.fons),this.area.addChild(this.marc),this.area.addChild(this.base),this.contenedor.addChild(this.areaText),this.contenedor.addChild(this.texte),this.contenedor.addChild(this.area),this.area.on("mousedown",this.pressHandler,this),this.areaText.on("mousedown",this.pressHandler,this),this.contenedor.on("mouseover",function(e){document.body.style.cursor="pointer"}),this.contenedor.on("mouseout",function(e){document.body.style.cursor="default"})}function datosContenedor(){this.tipo="",this.classe="",this.enunciado="",this.temps="",this.calc="",this.sinaleatoriedad="",this.respuestaunica="",this.masinfo=new masInfo,this.plataforma=new plataforma}function plataforma(){this.grado="",this.titulo="",this.lang=""}function masInfo(){this.inicio="",this.text=""}function datosMotor(){this.cantidad="",this.preguntas=new Array}function pregunta(){this.explicacion="",this.enunciado="",this.video="",this.salto="",this.id=-1,this.respuestas=new Array}function respuesta(){this.text="",this.correcte=-1,this.id=-1}function initMediaPlayer(){var e={theme:"aulaplaneta",autoplayOn:!1,fullScreenRelocateOn:!0,texts:{play:"Reproducir",playTitle:"Comenzar la reproducción",pause:"Pausa",pauseTitle:"Parar la reproducción",mute:"Silenciar",unmute:"Recuperar el sonido",fullscreen:"Pantalla completa",fullscreenTitle:"Activar/desactivar el modo de pantalla completa",volumeTitle:"Control de volumen",seekTitle:"Control de tiempo",captions:"Subtítulos",captionsTitle:"Mostrar/ocultar subtítulos"},onToolbarTemplate:function(e,t){var i=e.$self.is("video")?'<button class="cepda-fullscreen-button" title="'+t.texts.fullscreenTitle+'">'+t.texts.fullscreen+"</button>":"",n='<div class="cepda-controls"><span style="float:left; width: 10px;">&nbsp;</span><button class="cepda-play-button" title="'+t.texts.playTitle+'">'+t.texts.play+'</button><input type="range" class="cepda-seek-slider" title="'+t.texts.seekTitle+'" value="0" min="0" max="150" step="0.1"/><span style="float:right; width: 10px;">&nbsp;</span>'+i+'<button class="cepda-caption-button" title="'+t.texts.captionsTitle+'">'+t.texts.captions+'</button><div class="cepda-caption-selector"></div><div class="cepda-volume-box"><button class="cepda-volume-button" title="'+t.texts.mute+'">'+t.texts.mute+'</button><input type="range" class="cepda-volume-slider" title="'+t.texts.volumeTitle+'" value="1" min="0" max="1" step="0.05"/></div><span class="cepda-timer">00:00</span></div>';return n},onToolbarChanged:function(e,t){var i=e.$playBtn[0].offsetLeft+e.$playBtn[0].offsetWidth,n=e.$timer[0].offsetLeft-30;e.$seek.css("width",n-i+"px")}};jQuery("#videoplayer").cepdaMediaPlayer(e),setTimeout(function(){jQuery("video").css("visibility","visible")},500)}Utils=new function(){this.dashedLineTo=function(e,t,i,n,a,s){e.graphics.moveTo(t,i);for(var o=n-t,r=a-i,c=Math.floor(Math.sqrt(o*o+r*r)/s),h=o/c,l=r/c,d=0;d++<c;)t+=h,i+=l,d%2==0?e.graphics.moveTo(t,i):e.graphics.lineTo(t,i);return d%2==0?e.graphics.moveTo(t,i):e.graphics.lineTo(t,i),e},this.arrowRect=function(e,t,i,n,a){var s=.075*n,o=n-s;return e.graphics.moveTo(t,i),e.graphics.lineTo(t+o,i),e.graphics.lineTo(t+o+.8*s,i+.8*a/2),e.graphics.quadraticCurveTo(t+o+.95*s,i+a/2,t+o+.8*s,i+1.2*a/2,1),e.graphics.moveTo(t+o+.8*s,i+1.2*a/2),e.graphics.lineTo(t+o,i+a),e.graphics.lineTo(t,i+a),e.graphics.lineTo(t,i),e},this.lPad=function(e,t){return e=e.toString(),e.length<t?this.lPad("0"+e,t):e},this.cleanText=function(e){e=e.split("{{sub}}").join("<sub>"),e=e.split("{{sup}}").join("<sup>"),e=e.split("{{/subsup}}").join("<n>"),e=e.split("{{normal}}").join("<n>"),e=e.split("{{cur}}").join("<i>"),e=e.split("{{neg}}").join("<b>"),e=e.split("{{u}}").join("<u>"),e=e.split("\n").join("<br/>"),e=e.split("\r").join("<br/>");for(var t=!1,i=!1,n="",a=0;a<e.length;a++)if("<"!=e[a])if(">"!=e[a]){if(t){if(" "==e[a]||"n"==e[a]||"/"==e[a]){t=!1;continue}n+=e[a];continue}}else t&&(e=e.replace("<n>","</"+n+">"),t=!1,i=!1,n="");else t=!0,i=!1;return e},this.cleanTags=function(e){var t="";e=e.split("<![CDATA[").join(""),e=e.split("]]>").join("");for(var i=!1,n=!1,a="",s=0;s<e.length;s++)"<"!=e[s]?">"!=e[s]?i?a+=e[s]:t+=e[s]:i&&(i=!1,n=!1):(a="",i=!0,n=!1);return t}},Scorm=new function(){this.modo="",this.initialMode="",this.suspend_data="",this.completed="",this.connected=!1,this.MODO_EXPONER="browse",this.MODO_REVISAR="review",this.MODO_REVISARALUMNO="areview",this.MODO_EXAMEN="exam",this.init=function(e){this.modo=e.mode,this.suspend_data=e.suspend_data,this.completed=e.completed,this.connected=e.connected,this.initialMode=this.modo}},this.createjs=this.createjs||{},function(){"use strict";var e=function(e,t,i){this.initialize(e,t,i)},t=e.prototype=new createjs.DisplayObject,i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.getContext&&(e._workingContext=i.getContext("2d"),i.width=i.height=1),e.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},e.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},t.text="",t.font=null,t.color=null,t.textAlign="left",t.textBaseline="top",t.maxWidth=null,t.outline=0,t.lineHeight=0,t.lineWidth=null,t.current_Y=0,t.current_font="",t.base_font="",t.underline=!1,t.fontSize=0,t.cleanedText="",t.lines=0,t.yPatch=0,t.DisplayObject_initialize=t.initialize,t.initialize=function(e,t,i){this.DisplayObject_initialize(),this.text=e,this.font=t,this.color=i},t.isVisible=function(){var e=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)&&(this.yPatch=.25*e.measureText("M").width);var i=this.color||"#000";return this.outline?(e.strokeStyle=i,e.lineWidth=1*this.outline):e.fillStyle=i,this._drawText(this._prepContext(e)),!0},t.getMeasuredWidth=function(){return this.cleanText(),this._prepContext(e._workingContext).measureText(this.cleanedText).width},t.getMeasuredLineHeight=function(){return 1.2*this._prepContext(e._workingContext).measureText("M").width},t.getMeasuredHeight=function(){return this._drawText(null,{}).height},t.DisplayObject_getBounds=t.getBounds,t.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;if(null==this.text||""==this.text)return null;var i=this._drawText(null,{}),n=this.maxWidth&&this.maxWidth<i.width?this.maxWidth:i.width,a=n*e.H_OFFSETS[this.textAlign||"left"],s=this.lineHeight||this.getMeasuredLineHeight(),o=s*e.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.initialize(a,o,n,i.height)},t.clone=function(){var t=new e(this.text,this.font,this.color);return this.cloneProps(t),t},t.toString=function(){return"[RichText (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},t.DisplayObject_cloneProps=t.cloneProps,t.cloneProps=function(e){this.DisplayObject_cloneProps(e),e.textAlign=this.textAlign,e.textBaseline=this.textBaseline,e.maxWidth=this.maxWidth,e.outline=this.outline,e.lineHeight=this.lineHeight,e.lineWidth=this.lineWidth},t._prepContext=function(e){return e.font=this.font,e.textAlign=this.textAlign||"left",e.textBaseline=this.textBaseline||"top",e},t._drawText=function(t,i){var n=!!t;n||(t=this._prepContext(e._workingContext));var a=this.lineHeight||this.getMeasuredLineHeight(),s=0,o=0;this.cleanText();for(var r=String(this.text).split(/(?:\r\n|\r|\n)/),c=String(this.cleanedText).split(/(?:\r\n|\r|\n)/),h=0,l=r.length;l>h;h++){var d=r[h],u=c[h],g=null;if(null!=this.lineWidth&&(g=t.measureText(u).width)>this.lineWidth){var p=d.indexOf("neg")>=0?1.05:1,m=d.split(/(\s)/);d=m[0];var f=u.split(/(\s)/);u=f[0],g=t.measureText(u).width;for(var x=1,C=f.length;C>x;x+=2){var _=t.measureText(f[x]+f[x+1]).width*p;g+_>this.lineWidth?(n&&this._drawTextLine(t,d,o*a),g>s&&(s=g),d=m[x+1],u=f[x+1],g=t.measureText(u).width,o++):(d+=m[x]+m[x+1],u+=f[x]+f[x+1],g+=_)}}n&&this._drawTextLine(t,d,o*a),i&&null==g&&(g=t.measureText(u).width),g>s&&(s=g),o++}return i&&(i.count=o,i.width=s,i.height=o*a),this.current_Y=0,i},t.cleanText=function(){this.cleanedText=this.text.split("{{sub}}").join(""),this.cleanedText=this.cleanedText.split("{{sup}}").join(""),this.cleanedText=this.cleanedText.split("{{/subsup}}").join(""),this.cleanedText=this.cleanedText.split("{{normal}}").join(""),this.cleanedText=this.cleanedText.split("{{cur}}").join(""),this.cleanedText=this.cleanedText.split("{{neg}}").join(""),this.cleanedText=this.cleanedText.split("{{u}}").join(""),this.cleanedText=this.cleanedText.split("{{lt}}").join(""),this.cleanedText=this.cleanedText.split("{{lg}}").join("")},t._drawTextLine=function(e,t,i){var n=0,a=i,s="";(this.current_font="")&&(this.current_font=e.font),this.current_Y=i,""==this.base_font&&(this.base_font=e.font);var o=t.split("{{");s=o[0],this._drawTextPart(e,s,n),n+=e.measureText(s).width;for(var r in o)if(0!=r){var c=(o[r],o[r].split("}}"));switch(this.underline=!1,c[0]){case"sub":this.current_font=Math.ceil(this.fontSize/1.5)+"px Arial",this.current_Y=a+Math.ceil(this.fontSize/3)+3;break;case"sup":this.current_font=Math.ceil(this.fontSize/1.5)+"px Arial",this.current_Y=a-2;break;case"cur":this.current_font="italic "+this.base_font,this.current_Y=a;break;case"neg":this.current_font="bold "+this.base_font,this.current_Y=a;break;case"u":this.underline=!0;break;case"lt":c[1]="<"+c[1];break;case"lg":c[1]=">"+c[1];break;default:this.current_Y=a,this.current_font=this.base_font}s=c[1],this._drawTextPart(e,s,n),n+=e.measureText(s).width}},t._drawTextPart=function(e,t,i){e.font=this.current_font,this.outline?e.strokeText(t,i,this.current_Y+this.yPatch,this.maxWidth||65535):e.fillText(t,i,this.current_Y+this.yPatch,this.maxWidth||65535),this.underline&&this._drawUnderline(e,t,i)},t._drawUnderline=function(e,t,i){e.beginPath(),e.strokeStyle=this.color,e.lineWidth=1,e.moveTo(i,this.current_Y+this.fontSize),e.lineTo(i+e.measureText(t.trim()).width,this.current_Y+this.fontSize),e.stroke()},createjs.RichText=e}(),solucioPanell.prototype.selectPag=function(e){this.pagines.pags[e-1].state("select"),this.currentPag=e-1,this.currentPag<this.numPagines-1&&(this.seguent.contenedor.visible=!0),this.currentPag==this.numPagines-1&&(this.seguent.contenedor.visible=!1),Motor.pagines[this.currentPag].validacio?this.pagines.pags[this.currentPag].numero.color="#41A62A":this.pagines.pags[e-1].numero.color="#E1001A"},solucioPanell.prototype.unselectCurrentPag=function(){Motor.pagines[this.currentPag].validacio?this.pagines.pags[this.currentPag].state("correct"):this.pagines.pags[this.currentPag].state("error"),this.pagines.pags[this.currentPag].numero.color="#0D3158"},solucioPanell.prototype.seguentPag=function(){this.currentPag<this.numPagines-1&&(this.unselectCurrentPag(),this.currentPag++,this.pagines.pags[this.currentPag].state("select"),this.pagines.pags[this.currentPag].numero.color="#E1001A",this.currentPag==this.numPagines-1&&(this.seguent.contenedor.visible=!1))},solucioPanell.prototype.validaPags=function(){for(key in Motor.pagines)Motor.pagines[key].validacio?this.pagines.pags[key].state("correct"):this.pagines.pags[key].state("error")},PagBase.prototype.state=function(e){this.fons.graphics.clear();var t="";"normal"==e?t="#556f8a":"select"==e?t="#f8b334":"correct"==e?t="#41a62a":"error"==e?t="#e1061a":"buit"==e&&(t="#fff"),"inici"==this.src?this.fons.graphics.beginFill(t).drawRoundRectComplex(1,1,28,28,6,0,0,6):"fi"==this.src?this.fons.graphics.beginFill(t).drawRoundRectComplex(1,1,28,28,0,6,6,0):this.fons.graphics.beginFill(t).drawRoundRectComplex(1,1,28,28,0,0,0,0)},inicialPanell.prototype.selectPag=function(e){this.pagines.pags[e-1].state("select"),this.currentPag=e-1,this.currentPag<this.numPagines-1&&(this.seguent.contenedor.visible=!0),this.currentPag==this.numPagines-1&&(this.seguent.contenedor.visible=!1)},inicialPanell.prototype.unselectCurrentPag=function(){0==this.pagines.pags[this.currentPag].contestada?this.pagines.pags[this.currentPag].state("normal"):this.pagines.pags[this.currentPag].state("buit")},inicialPanell.prototype.checkedCurrentPag=function(){this.pagines.pags[this.currentPag].contestada=1},inicialPanell.prototype.seguentPag=function(){this.currentPag<this.numPagines-1&&(this.unselectCurrentPag(),this.currentPag++,this.pagines.pags[this.currentPag].state("select"),this.currentPag==this.numPagines-1&&(this.seguent.contenedor.visible=!1))},CheckBox.prototype.pressHandler=function(e){if(null==e||e.primary){if(1==this.repostaUnica)for(key in this.paginaPare.respostes)this.paginaPare.respostes[key].id!=this.id&&(this.paginaPare.respostes[key].base.removeAllChildren(),this.paginaPare.respostes[key].areaText.alpha=.01,this.paginaPare.respostes[key].checked=!1);this.checked?(this.base.removeAllChildren(),this.areaText.alpha=.01):(this.base.addChild(this.chk),this.areaText.alpha=1),this.checked=!this.checked,Contenedor.checkPagina()}},CheckBox.prototype.desactivar=function(){this.area.removeAllEventListeners(),this.areaText.removeAllEventListeners(),this.contenedor.removeAllEventListeners()},CheckBox.prototype.activar=function(){this.area.hasEventListener("mousedown")||(this.area.on("mousedown",this.pressHandler,this),this.areaText.on("mousedown",this.pressHandler,this),this.contenedor.on("mouseover",function(e){document.body.style.cursor="pointer"}),this.contenedor.on("mouseout",function(e){document.body.style.cursor="default"}))},CheckBox.prototype.clear=function(){this.base.removeAllChildren(),this.marc.graphics.clear(),this.marc.graphics.beginStroke("#F8B334").setStrokeStyle(1).drawRoundRect(0,0,30,30,3),this.checked=!1},CheckBox.prototype.error=function(){this.base.removeAllChildren(),this.base.addChild(this.ko),this.marc.graphics.beginStroke("#E1001A").setStrokeStyle(2).drawRoundRect(0,0,30,30,5)},CheckBox.prototype.correct=function(){this.base.removeAllChildren(),this.base.addChild(this.ok),this.marc.graphics.beginStroke("#41A62A").setStrokeStyle(2).drawRoundRect(0,0,30,30,5)},Contenedor=new function(){this.MOTOR_Y=118,this.FONS_MOTOR_H=440,this.TITLE_MOTOR_X=180,this.TITLE_MOTOR_Y=12,this.LOGO_PLANETA_X=130,this.LOGO_PLANETA_Y=5,this.LOGO_PLANETA_SCALE=.13,this.PLANETA_X=14,this.PLANETA_Y=8,this.PLANETA_X2=55,this.FONS_TITLE_Y=41,this.FONS_TITLE_HEIGHT=76,this.TANCAR_X=915,this.TANCAR_Y=10,this.TITLE_ACT_X=25,this.TITLE_ACT_Y=52,this.TITLE_ACT_W=800,this.TITLE_ACT_H=25,this.MOREINFO_SIZE=22,this.MOREINFO_X1=815,this.MOREINFO_X2=915,this.MOREINFO_Y=48,this.CALC_X1=811,this.CALC_X2=911,this.CALC_Y=75,this.SEPARATOR_Y=41,this.SEPARATOR_X=850,this.SEPARATOR_HEIGHT=76,this.CLOCK_TITLE_X=855,this.CLOCK_TITLE_Y=63,this.CLOCK_X=860,this.CLOCK_Y=72,this.fons="",this.fonsGeneral="",this.fonsTitol="",this.title_planeta_1="",this.title_planeta_2="",this.logo_planeta="",this.title_motor="",this.tancar="",this.title_exercici="",this.mesInfo="",this.calc="",this.separador="",this.titleClock="",this.clock="",this.DEFAULT_TIME=0,this.time=0,this.timer="",this.timeRevision="",this.validar="",this.corregir="",this.missatge="",this.moreinfopanel="",this.num_pagines=0,this.reiniciar=!1,this.datosXML="",this.obtenerPrincipal_mc=function(e){},this.obtenerNoRandom=function(){},this.obtenerIdioma=function(){},this.motorCompletado=function(){},this.paginaCompletada=function(){},this.motorCambioPagina=function(e){},this.crearPaginacio=function(){Contenedor.num_pagines=Motor.numPaginas(),this.drawFooter(),(this.reiniciar&&Scorm.modo==Scorm.MODO_REVISAR||!this.reiniciar&&(Scorm.modo==Scorm.MODO_REVISAR||Scorm.modo==Scorm.MODO_REVISARALUMNO))&&(Motor.estado=Scorm.suspend_data,Motor.revisar(),Motor.desactivar(),Contenedor.deleteHeaderDown(),Contenedor.drawHeaderDown(),Contenedor.validacioResultatsHandler(null))},this.cargarDatos=function(){$.get(datos_xml,function(e){Contenedor.datosXML=new datosContenedor;var t=$(e).find("motor");Contenedor.datosXML.tipo=t.attr("tipo"),Contenedor.datosXML.classe=t.attr("classe");var i=t.children("enunciado"),n=i.text();n=n.replace(/</g,"{{lt}}"),n=n.replace(/>/g,"{{lg}}"),Contenedor.datosXML.enunciado=n;var a=$(e).find("temps");Contenedor.datosXML.temps=a.text();var s=$(e).find("calc");Contenedor.datosXML.calc=s.text();var o=$(e).find("sinaleatoriedad");Contenedor.datosXML.sinaleatoriedad=o.text();var r=$(e).find("respuestaunica");Contenedor.datosXML.respuestaunica=r.text();var c=$(e).find("masinfo");Contenedor.datosXML.masinfo.text=c.text(),
Contenedor.datosXML.masinfo.inicio=c.attr("inicio");var h=$(e).find("plataforma");Contenedor.datosXML.plataforma.grado=h.find("grado").text(),Contenedor.datosXML.plataforma.titulo=h.find("titulo").text(),Contenedor.datosXML.plataforma.lang=h.find("lang").text(),Contenedor.inicializarEstructura(),Motor.cargarDatos(),Contenedor.settingsCalc()})},this.settingsCalc=function(){var e=Main.navegador.split(","),t=Main.mobil,i=e[0].indexOf("Chrome"),n=e[0].indexOf("Safari");e[1];1==Contenedor.datosXML.plataforma.grado?($("#calculator").calculator(),(i>-1||n>-1)&&"Android"==t||($("#calculator").draggable(),$("#calculator").css("-ms-touch-action","none"),$("#calculator").on("dragstart",function(e,t){Contenedor.calculadora.element_x=0,Contenedor.calculadora.element_y=0}))):($("#calculator").calculator({layout:$.calculator.scientificLayout}),(i>-1||n>-1)&&"Android"==t||($("#calculator").draggable(),$("#calculator").css("-ms-touch-action","none"),$("#calculator").on("dragstart",function(e,t){Contenedor.calculadora.element_x=0,Contenedor.calculadora.element_y=0})))},this.inicializarEstructura=function(){""==Contenedor.datosXML.plataforma.lang?LangRes.init():LangRes.setLang(Contenedor.datosXML.plataforma.lang),this.drawBackGround(),this.drawHeaderUp(),this.drawHeaderDown()},this.drawBackGround=function(){this.drawFonsGeneral(),this.drawFonsTitol(),this.drawFonsMotor()},this.drawHeaderUp=function(){this.drawPlaneta(),this.drawTitle()},this.drawHeaderDown=function(){this.drawTitleActivity(),this.drawMoreInfo(),this.drawCalculator(),this.drawSeparator(),this.drawClock()},this.drawFooter=function(){if(Contenedor.missatge=new inicialPanell(Contenedor.num_pagines),Contenedor.missatge.validar.bt.on("mousedown",Contenedor.validaHandler),Contenedor.missatge.corregir.bt.on("mousedown",Contenedor.corregirHandler),Contenedor.num_pagines>1){for(key in Contenedor.missatge.pagines.pags)Contenedor.missatge.pagines.pags[key].bt.on("mousedown",Contenedor.selectPagHandler,Contenedor.missatge.pagines.pags[key]);Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.seguentPaginaHandler)}},this.seguentPaginaHandler=function(e){e.primary&&(Contenedor.missatge.seguentPag(),Motor.ponerPagina(Motor.currentNumPag+2))},this.selectPagHandler=function(e){e.primary&&(Contenedor.missatge.unselectCurrentPag(),Contenedor.missatge.selectPag(this.num),Motor.ponerPagina(this.num))},this.validaHandler=function(e){e.primary&&(Scorm.initialMode==Scorm.MODO_EXPONER?Contenedor.missatge=new missatgePanell(LangRes.lang[LangRes.MSG_REINTENTAR]):Scorm.initialMode!=Scorm.modo?Contenedor.missatge=new missatgePanell(LangRes.lang[LangRes.MSG_REINTENTAR_AREVIEW]):Contenedor.missatge=new missatgePanell(LangRes.lang[LangRes.MSG_REINTENTAR]),Contenedor.missatge.aceptar.bt.on("mousedown",Contenedor.reiniciarHandler),Contenedor.missatge.cancelar.bt.on("mousedown",Contenedor.cancelHandler),Motor.desactivar())},this.cancelHandler=function(e){e.primary&&(Contenedor.drawFooter(),Contenedor.time>0?Motor.activar():""!=Contenedor.datosXML.temps&&"0"!=Contenedor.datosXML.temps&&Scorm.modo!=Scorm.MODO_EXAMEN?Motor.activar():(""==Contenedor.datosXML.temps||"0"==Contenedor.datosXML.temps)&&Motor.activar())},this.reiniciarHandler=function(e){e.primary&&(clearInterval(Contenedor.timer),Contenedor.time=Contenedor.DEFAULT_TIME,Main.stage.removeChild(Contenedor.titleClock),Main.stage.removeChild(Contenedor.clock),Contenedor.solucionat=!1,Scorm.modo==Scorm.MODO_EXAMEN&&Contenedor.drawClock(),Contenedor.drawFooter(),Contenedor.reiniciar=!0,Motor.reinicializarEstructuraMotor())},this.corregirHandler=function(e){e.primary&&(clearInterval(Contenedor.timer),Scorm.modo==Scorm.MODO_EXAMEN?(Motor.estaCompletado()?Contenedor.missatge=new missatgePanell(LangRes.lang[LangRes.MSG_VALIDAR]):Contenedor.missatge=new missatgePanell(LangRes.lang[LangRes.MSG_VALIDARSINRESPONDER]),Contenedor.missatge.aceptar.bt.on("mousedown",Contenedor.validacioResultatsHandler),Contenedor.missatge.cancelar.bt.on("mousedown",Contenedor.cancelCorrectHandler)):Contenedor.validacioResultatsHandler(null),Motor.desactivar())},this.validacioResultatsHandler=function(e){if(null==e||e.primary){var t=Motor.validar(),i=t.split("/"),n=i[0],a=i[1],s="",o="";if(null==e?(o=Contenedor.getTempsRevision(),s=Contenedor.timeRevision,Scorm.modo==Scorm.MODO_REVISAR&&(this.clock.text=s)):(s=Contenedor.getTemps(),o=Contenedor.getTempsUsat()),Scorm.modo==Scorm.MODO_EXAMEN){var r=Motor.getEstado();""!=Contenedor.datosXML.temps&&Contenedor.datosXML.temps>0&&(r="["+s+"]["+r+"]"),aulaPlaneta.SCORM.ejercicio_enviar_resultado(r,0,a,n,s)}else(Scorm.modo==Scorm.MODO_REVISAR||Scorm.modo==Scorm.MODO_REVISARALUMNO)&&clearInterval(Contenedor.timer);Contenedor.missatge=new resultatsPanell(n,a,o),Contenedor.missatge.aceptar.bt.on("mousedown",Contenedor.resultatAceptarHandler)}},this.resultatAceptarHandler=function(e){if(e.primary&&(this.num_pagines=Motor.numPaginas(),Contenedor.missatge=new solucioPanell(this.num_pagines),Contenedor.missatge.solucio.bt.on("mousedown",Contenedor.solucioHandler),Scorm.modo!=Scorm.MODO_REVISAR&&Contenedor.missatge.reintentar.bt.on("mousedown",Contenedor.preReiniciarHandler),(Scorm.modo==Scorm.MODO_EXAMEN||Scorm.modo==Scorm.MODO_REVISARALUMNO)&&(Scorm.modo=Scorm.MODO_EXPONER),Contenedor.num_pagines>1)){for(key in Contenedor.missatge.pagines.pags)Contenedor.missatge.pagines.pags[key].bt.on("mousedown",Contenedor.selectPagHandler,Contenedor.missatge.pagines.pags[key]);Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.seguentPaginaHandler)}},this.preReiniciarHandler=function(e){e.primary&&(Scorm.initialMode==Scorm.MODO_EXPONER?Contenedor.missatge=new missatgePanell(LangRes.lang[LangRes.MSG_REINTENTAR]):Contenedor.missatge=new missatgePanell(LangRes.lang[LangRes.MSG_REINTENTAR_AREVIEW]),Contenedor.missatge.cancelar.bt.on("mousedown",Contenedor.returnSolucioHandler),Contenedor.missatge.aceptar.bt.on("mousedown",Contenedor.reiniciarHandler))},this.returnSolucioHandler=function(e){if(e.primary&&(this.num_pagines=Motor.numPaginas(),Contenedor.missatge=new solucioPanell(this.num_pagines),Contenedor.missatge.solucio.bt.on("mousedown",Contenedor.solucioHandler),Contenedor.missatge.reintentar.bt.on("mousedown",Contenedor.preReiniciarHandler),Contenedor.solucionat&&(Contenedor.missatge.solucio.bt.visible=!1),Contenedor.num_pagines>1)){for(key in Contenedor.missatge.pagines.pags)Contenedor.missatge.pagines.pags[key].bt.on("mousedown",Contenedor.selectPagHandler,Contenedor.missatge.pagines.pags[key]);Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.seguentPaginaHandler)}},this.solucioHandler=function(e){e.primary&&(Contenedor.missatge.solucio.bt.visible=!1,Contenedor.solucionat=!0,Motor.verSolucion())},this.cancelCorrectHandler=function(e){e.primary&&(Main.stage.removeChild(Contenedor.missatge.contenedor),Contenedor.drawFooter(),Contenedor.time>0?(Contenedor.timer=setInterval(Contenedor.updateClock,1e3),Motor.activar()):""!=Contenedor.datosXML.temps&&"0"!=Contenedor.datosXML.temps&&Scorm.modo!=Scorm.MODO_EXAMEN?Motor.activar():(""==Contenedor.datosXML.temps||"0"==Contenedor.datosXML.temps)&&Motor.activar())},this.deleteHeaderDown=function(){Main.stage.removeChild(this.titleClock),Main.stage.removeChild(this.clock),Main.stage.removeChild(this.separador),Main.stage.removeChild(this.calc),Main.stage.removeChild(this.mesInfo)},this.drawClock=function(){if((""!=Contenedor.datosXML.temps&&Contenedor.datosXML.temps>0&&Scorm.modo==Scorm.MODO_EXAMEN||""!=Contenedor.timeRevision&&Scorm.modo==Scorm.MODO_REVISAR)&&(Contenedor.time=60*Contenedor.datosXML.temps,this.titleClock=new createjs.RichText,this.titleClock.font="bold 10px Arial",this.titleClock.color="#E1001A",this.titleClock.text=LangRes.lang[LangRes.TIEMPORESTANTE],this.titleClock.y=this.CLOCK_TITLE_Y,this.titleClock.x=this.CLOCK_TITLE_X,Main.stage.addChild(this.titleClock),this.clock=new createjs.RichText,this.clock.font="34px Arial",this.clock.color="#E1001A",this.clock.text="00:00",this.clock.y=this.CLOCK_Y,this.clock.x=this.CLOCK_X,Main.stage.addChild(this.clock),Scorm.modo==Scorm.MODO_EXAMEN)){var e=Math.floor(Contenedor.time/60),t=Contenedor.time-60*e;e=Utils.lPad(e.toString(),2),t=Utils.lPad(t.toString(),2),this.clock.text=e+":"+t,Contenedor.timer=setInterval(this.updateClock,1e3)}},this.getTempsRevision=function(){var e=Contenedor.timeRevision.split(":"),t=60*parseInt(e[0])+parseInt(e[1]);if(""!=Contenedor.datosXML.temps&&Contenedor.datosXML.temps>0){var i=60*Contenedor.datosXML.temps,n=i-t;if(0>n)return"00:00";var a=Math.floor(n/60),s=n-60*a;return a=Utils.lPad(a.toString(),2),s=Utils.lPad(s.toString(),2),a+":"+s}return"00:00"},this.getTemps=function(){if(""!=Contenedor.datosXML.temps&&Contenedor.datosXML.temps>0){var e=Contenedor.time,t=Math.floor(e/60),i=e-60*t;return t=Utils.lPad(t.toString(),2),i=Utils.lPad(i.toString(),2),t+":"+i}return"00:00"},this.getTempsUsat=function(){if(""!=Contenedor.datosXML.temps&&Contenedor.datosXML.temps>0){var e=60*Contenedor.datosXML.temps,t=e-Contenedor.time,i=Math.floor(t/60),n=t-60*i;return i=Utils.lPad(i.toString(),2),n=Utils.lPad(n.toString(),2),i+":"+n}return"00:00"},this.updateClock=function(){if(Contenedor.time>0){Contenedor.time--;var e=Math.floor(Contenedor.time/60),t=Contenedor.time-60*e;e=Utils.lPad(e.toString(),2),t=Utils.lPad(t.toString(),2),Contenedor.clock.text=e+":"+t}else clearInterval(Contenedor.timer),""!=Contenedor.missatge&&(Main.stage.removeChild(Contenedor.missatge.contenedor),Contenedor.missatge=""),Contenedor.missatge=new confirmaPanell(LangRes.lang[LangRes.MSG_AGOTADOTIEMPO]),Contenedor.missatge.reiniciar.bt.on("mousedown",Contenedor.reiniciarHandler),Contenedor.missatge.corregir.bt.on("mousedown",Contenedor.corregirHandler),Motor.desactivar()},this.drawSeparator=function(){(""!=Contenedor.datosXML.temps&&Contenedor.datosXML.temps>0&&Scorm.modo==Scorm.MODO_EXAMEN||""!=Contenedor.timeRevision&&Scorm.modo==Scorm.MODO_REVISAR)&&(this.separador=new createjs.Shape,this.separador.graphics.beginStroke("#C5C6C8").setStrokeStyle(1),this.separador.graphics.moveTo(this.SEPARATOR_X,this.SEPARATOR_Y),this.separador.graphics.lineTo(this.SEPARATOR_X,this.SEPARATOR_Y+this.SEPARATOR_HEIGHT),this.separador.graphics.endStroke(),Main.stage.addChild(this.separador))},this.drawCalculator=function(){if("1"==this.datosXML.calc){var e=new Image;e.src=pppPreloader.from("module","motor/images/calculadora.png"),e.name="calc",this.calc=new createjs.Bitmap(e),""!=Contenedor.datosXML.temps&&Contenedor.datosXML.temps>0&&Scorm.modo==Scorm.MODO_EXAMEN||""!=Contenedor.timeRevision&&Scorm.modo==Scorm.MODO_REVISAR?(this.calc.x=this.CALC_X1+4,this.calc.y=this.CALC_Y+2):(this.calc.x=this.CALC_X2+4,this.calc.y=this.CALC_Y+2),this.calc.scaleX=.7,this.calc.scaleY=.7,this.calc.on("mousedown",this.calcHandler),this.calc.on("mouseover",function(){document.body.style.cursor="pointer"},this),this.calc.on("mouseout",function(){document.body.style.cursor="default"},this),Main.stage.addChild(this.calc),this.calcContenedor=new createjs.Container,this.calculadora=new createjs.DOMElementCustom("calculator",this.calcContenedor),1==Contenedor.datosXML.plataforma.grado?(this.calculadora.element_x=1600,this.calculadora.element_y=150,this.calculadora.element_width=245,this.calculadora.element_height=250,this.calculadora.x=this.calculadora.element_x,this.calculadora.y=this.calculadora.element_y,$(this.calculadora.htmlElement).css("width",230),$(this.calculadora.htmlElement).css("height",225)):(this.calculadora.element_x=1600,this.calculadora.element_y=150,this.calculadora.element_width=425,this.calculadora.element_height=345,this.calculadora.x=this.calculadora.element_x,this.calculadora.y=this.calculadora.element_y,$(this.calculadora.htmlElement).css("width",425),$(this.calculadora.htmlElement).css("height",345)),$(Contenedor.calculadora.htmlElement).css("display","none"),this.calcContenedor.addChild(this.calculadora),Main.stage.addChild(this.calcContenedor)}else this.calculadora=new createjs.DOMElementCustom("calculator",this.calcContenedor),$(this.calculadora.htmlElement).css("display","none")},this.calcHandler=function(e){if(e.primary)if(1600==Contenedor.calculadora.element_x){$(Contenedor.calculadora.htmlElement).css("display","inline");var t=$("#wrapper").css("line-height").substring(0,$("#stage").css("line-height").lastIndexOf("px")),i=0;t>$("#stage").attr("height")&&(i=(t-$("#stage").attr("height"))/2/Main.scale),window.innerHeight>1e3?$(Contenedor.calculadora.htmlElement).css("top",(window.innerHeight-$("#stage").attr("height"))/2+i):$(Contenedor.calculadora.htmlElement).css("top",i),$(Contenedor.calculadora.htmlElement).css("left",0),createjs.Tween.get(Contenedor.calculadora).to({element_x:500,element_y:150},1250,createjs.Ease.circOut)}else $(Contenedor.calculadora.htmlElement).css("display","none"),Contenedor.calculadora.element_x=1600,Contenedor.calculadora.element_y=150,createjs.Tween.removeTweens(Contenedor.calculadora)},this.closeHandler=function(){1600==Contenedor.calculadora.element_x?($(Contenedor.calculadora.htmlElement).css("display","inline"),createjs.Tween.get(Contenedor.calculadora).to({element_x:500,element_y:150},1250,createjs.Ease.circOut)):($(Contenedor.calculadora.htmlElement).css("display","none"),Contenedor.calculadora.element_x=1600,Contenedor.calculadora.element_y=150,createjs.Tween.removeTweens(Contenedor.calculadora))},this.drawMoreInfo=function(){if(""!=this.datosXML.masinfo.text){var e=new Image;e.src=pppPreloader.from("module","motor/images/mesInfo.png"),e.name="tancar";var t={images:[e],frames:{width:this.MOREINFO_SIZE,height:this.MOREINFO_SIZE},animations:{normal:[0],hover:[1]}},i=new createjs.SpriteSheet(t);this.mesInfo=new createjs.Sprite(i),this.mesInfo.on("mouseover",function(e){this.gotoAndStop("hover")}),this.mesInfo.on("mouseout",function(e){this.gotoAndStop("normal")}),this.mesInfo.on("mousedown",this.masInfoHandler),""!=Contenedor.datosXML.temps&&Contenedor.datosXML.temps>0&&Scorm.modo==Scorm.MODO_EXAMEN||""!=Contenedor.timeRevision&&Scorm.modo==Scorm.MODO_REVISAR?(this.mesInfo.x=this.MOREINFO_X1,this.mesInfo.y=this.MOREINFO_Y):(this.mesInfo.x=this.MOREINFO_X2,this.mesInfo.y=this.MOREINFO_Y),this.mesInfo.gotoAndStop("normal"),Main.stage.addChild(this.mesInfo),this.mesInfo.on("mouseover",function(){document.body.style.cursor="pointer"},this),this.mesInfo.on("mouseout",function(){document.body.style.cursor="default"},this),"1"==this.datosXML.masinfo.inicio&&setTimeout(function(){Contenedor.masInfoHandler(null)},500),$("#input_moreInfo").length||(texto=Utils.cleanText(Contenedor.datosXML.masinfo.text),this.$inputText=$('<div id="input_moreInfo" style="display:none;"><span class="spanMoreInfo">'+texto+"</span></div>"),this.$inputText.focusout(function(e){$("body").focus()}),$("#moreinfo").append(this.$inputText))}},this.masInfoHandler=function(e){(null==e||e.primary)&&""==Contenedor.moreinfopanel&&(Contenedor.moreinfopanel=new moreInfoPanell(Contenedor.datosXML.masinfo.text),$(Contenedor.$inputText).css("display","inline"),Contenedor.moreinfopanel.contenedor.on("mousedown",Contenedor.tancarMasInfoHandler),Main.stage.setChildIndex(Contenedor.moreinfopanel.contenedor,Main.stage.getNumChildren()),Motor.hideDomObjects())},this.tancarMasInfoHandler=function(e){e.primary&&(Main.stage.removeChild(Contenedor.moreinfopanel.contenedor),$(Contenedor.$inputText).css("display","none"),Contenedor.moreinfopanel="",Motor.showDomObjects())},this.drawTitleActivity=function(){this.title_exercici=new createjs.RichText,this.title_exercici.font=1==Contenedor.datosXML.plataforma.grado?"20px Arial":"18px Arial",this.title_exercici.color="#0D3158",this.title_exercici.fontSize=20,this.title_exercici.text=Contenedor.datosXML.enunciado,this.title_exercici.y=this.TITLE_ACT_Y,this.title_exercici.x=this.TITLE_ACT_X,this.title_exercici.lineWidth=this.TITLE_ACT_W,this.title_exercici.lineHeight=this.TITLE_ACT_H,this.title_exercici.mask=new createjs.Shape,this.title_exercici.mask.graphics.beginFill("#fff").drawRect(0,0,this.TITLE_ACT_W,50),this.title_exercici.mask.y=this.TITLE_ACT_Y-1,this.title_exercici.mask.x=this.TITLE_ACT_X,Main.stage.addChild(this.title_exercici)},this.drawTancar=function(){var e=new Image;e.src=pppPreloader.from("module","motor/images/tancar.png"),e.name="tancar",this.tancar=new createjs.Bitmap(e),this.tancar.x=this.TANCAR_X,this.tancar.y=this.TANCAR_Y,this.tancar.on("mousedown",this.tancarGHandler),this.tancar.on("mouseover",function(){document.body.style.cursor="pointer"},this),this.tancar.on("mouseout",function(){document.body.style.cursor="default"},this),Main.stage.addChild(this.tancar)},this.tancarGHandler=function(e){aulaPlaneta.SCORM.ejercicio_cerrar()},this.drawTitle=function(){this.title_motor=new createjs.RichText,this.title_motor.font="15px Arial",this.title_motor.color="#fff",this.title_motor.text=Contenedor.datosXML.plataforma.titulo,this.title_motor.y=this.TITLE_MOTOR_Y,this.title_motor.x=this.TITLE_MOTOR_X,Main.stage.addChild(this.title_motor)},this.drawPlaneta=function(){this.title_planeta_1=new createjs.RichText,this.title_planeta_1.font="22px Arial",this.title_planeta_1.color="#fff",this.title_planeta_1.text="aula",this.title_planeta_1.y=this.PLANETA_Y,this.title_planeta_1.x=this.PLANETA_X,Main.stage.addChild(this.title_planeta_1),this.title_planeta_2=new createjs.RichText,this.title_planeta_2.font="22px Arial",this.title_planeta_2.color="#009ee0",this.title_planeta_2.text="Planeta",this.title_planeta_2.y=this.PLANETA_Y,this.title_planeta_2.x=this.PLANETA_X2,Main.stage.addChild(this.title_planeta_2);var e=new Image;e.src=pppPreloader.from("module","motor/images/planeta.png"),e.name="logo",this.logo_planeta=new createjs.Bitmap(e),this.logo_planeta.x=this.LOGO_PLANETA_X,this.logo_planeta.y=this.LOGO_PLANETA_Y,this.logo_planeta.scaleX=this.LOGO_PLANETA_SCALE,this.logo_planeta.scaleY=this.LOGO_PLANETA_SCALE,Main.stage.addChild(this.logo_planeta)},this.drawFonsTitol=function(){this.fonsTitol=new createjs.Shape,this.fonsTitol.graphics.beginFill("#fff").drawRect(0,0,Main.stage_width,this.FONS_TITLE_HEIGHT),this.fonsTitol.x=0,this.fonsTitol.y=this.FONS_TITLE_Y,Main.stage.addChild(this.fonsTitol)},this.drawFonsGeneral=function(){this.fonsGeneral=new createjs.Shape,this.fonsGeneral.graphics.beginFill("#0D3158").drawRoundRect(0,0,Main.stage_width,Main.stage_height,10),this.fonsGeneral.x=0,this.fonsGeneral.y=0,Main.stage.addChild(this.fonsGeneral)},this.checkPagina=function(){Contenedor.missatge.checkedCurrentPag()},this.drawFonsMotor=function(){this.fons=new createjs.Shape,this.fons.graphics.beginFill("#fde8c2").drawRect(0,0,Main.stage_width,this.FONS_MOTOR_H),this.fons.x=0,this.fons.y=this.MOTOR_Y,Main.stage.addChild(this.fons)}},Motor=new function(){this.fons="",this.pagines=new Array,this.contenedor="",this.INITIAL_Y=118,this.PREG_Y_PADDING=87,this.PREG_X_PADDING=25,this.PREG_INICI_X_PADDING=235,this.PREG_FINAL_X_PADDING=585,this.RESP_HEIGHT=82,this.RESP_WIDTH=322,this.RESP_INNER_HEIGHT=78,this.RESP_INNER_WIDTH=320,this.LINE_X=570,this.LINE_Y_MIN=20,this.LINE_Y_MAX=535,this.LINE_SIZE=3,this.itemX=0,this.itemY=0,this.separator="",this.datosXML="",this.video="",this.currentPag="",this.currentNumPag=0,this.ponerContenedor=function(e){},this.cargarDatos=function(){$.get(datos_xml,function(e){Motor.datosXML=new datosMotor,Motor.datosXML.cantidad=$(e).find("test").attr("cantidad"),$(e).find("cuestion").each(function(e){this.preg=new pregunta,this.preg.explicacion=$(this).children("explicacion").text(),this.preg.id=e,this.preg.enunciado=$(this).children("enunciado").text(),this.preg.video=$(this).children("video").text().split(".")[0]+".mp4",this.preg.salto=$(this).children("salto").text();var t=this;$(this).find("respuesta").each(function(e){var i=new respuesta;i.text=$(this).attr("contestacion"),i.correcte=$(this).attr("correcta"),i.id=e,t.preg.respuestas.push(i)}),Motor.datosXML.preguntas.push(this.preg)}),Motor.inicializarEstructura(),Contenedor.crearPaginacio()})},this.inicializarEstructura=function(e){this.init()},this.reinicializarEstructuraMotor=function(){Main.stage.removeChild(Motor.contenedor),Motor.cargarDatos()},this.estaCompletado=function(){for(key1 in Motor.pagines){var e=!1;for(key2 in Motor.pagines[key1].respostes)Motor.pagines[key1].respostes[key2].checked&&(e=!0);if(!e)return!1}return!0},this.getEstado=function(){for(var e=new Array,t=0;t<Motor.pagines.length;t++)for(var i in Motor.pagines)if(t==Motor.pagines[i].idPregunta){var n=new Array;for(var a in Motor.pagines[i].respostes)Motor.pagines[i].respostes[a].checked?n[Motor.pagines[i].respostes[a].idResposta]="1":n[Motor.pagines[i].respostes[a].idResposta]="0";e.push(n.join(","))}return e.join("|")},this.revisar=function(){if(""!=this.estado){if(this.estado.indexOf("[")>=0){var e=this.estado.substring(1,this.estado.length-1).split("][");Contenedor.timeRevision=e[0];var t=e[1].split("|")}else var t=this.estado.split("|");for(var i in t)if(""!=t[i].trim()){var n=t[i].split(",");for(key1 in Motor.pagines)if(i==Motor.pagines[key1].idPregunta)for(key2 in Motor.pagines[key1].respostes)for(key3 in n)key3==Motor.pagines[key1].respostes[key2].idResposta&&"1"==n[key3]&&Motor.pagines[key1].respostes[key2].pressHandler()}}},this.validar=function(){var e=0;for(key1 in Motor.pagines){for(key2 in Motor.pagines[key1].respostes)Motor.pagines[key1].respostes[key2].desactivar(),Motor.pagines[key1].respostes[key2].checked&&"1"==Motor.pagines[key1].respostes[key2].correcte?Motor.pagines[key1].respostes[key2].correct():Motor.pagines[key1].respostes[key2].checked&&"0"==Motor.pagines[key1].respostes[key2].correcte?(Motor.pagines[key1].respostes[key2].error(),Motor.pagines[key1].validacio=!1):"1"!=Motor.pagines[key1].respostes[key2].correcte||Motor.pagines[key1].respostes[key2].checked||(Motor.pagines[key1].validacio=!1);Motor.pagines[key1].validacio&&e++}return e.toString()+"/"+Motor.pagines.length.toString()},this.hideDomObjects=function(){$(Motor.video.htmlElement).css("display","none")},this.showDomObjects=function(){$(Motor.video.htmlElement).css("display","block")},this.obtenerEstado=function(){},this.reiniciar=function(){},this.activar=function(){for(key1 in Motor.pagines)for(key2 in Motor.pagines[key1].respostes)Motor.pagines[key1].respostes[key2].activar()},this.desactivar=function(){for(key1 in Motor.pagines)for(key2 in Motor.pagines[key1].respostes)Motor.pagines[key1].respostes[key2].desactivar()},this.numPaginas=function(){return Motor.datosXML.cantidad},this.ponerPagina=function(e){this.contenedor.removeChild(this.currentPag.contenedor),this.currentNumPag=e-1,this.currentPag=this.pagines[this.currentNumPag],this.contenedor.addChild(this.currentPag.contenedor),this.loadVideo()},this.loadVideo=function(){$("#videoHolder video source").attr("src")!=pppPreloader.from("data","data/videos/"+this.currentPag.video)&&($videoAPI=$("#videoplayer").data("cepdaPlayer"),$videoAPI.loadVideo(pppPreloader.from("data","data/videos/"+this.currentPag.video)))},this.obtenerPaginaActual=function(e){},this.verSolucion=function(e){this.deseleccionar(),this.solucionar()},this.deseleccionar=function(){for(var e in Motor.pagines)for(var t in Motor.pagines[e].respostes)Motor.pagines[e].respostes[t].desactivar(),Motor.pagines[e].respostes[t].clear()},this.solucionar=function(){for(var e in Motor.pagines){for(var t in Motor.pagines[e].respostes)"1"==Motor.pagines[e].respostes[t].correcte&&Motor.pagines[e].respostes[t].correct();Motor.pagines[e].explicacion.visible=!0}},this.obtenerTipoEjercicio=function(){},this.obtenerVersion=function(){},this.init=function(){this.contenedor=new createjs.Container,this.pagines=new Array,this.deleteVideos();$('<video id="videoplayer" width="325" height="220" controls></video>').append('<source id="videoSource" src="" type="video/mp4" />').appendTo($("#mediaHolder"));this.video=new createjs.DOMElementCustom("mediaHolder",this.contenedor),this.video.x=30,this.video.y=210,initMediaPlayer(),this.video.element_x=30,this.video.element_y=225,this.video.element_width=325,this.video.element_height=220,this.video.fontsize=18,this.video.grandParent=Main.stage,this.contenedor.addChild(this.video);for(var e=0;e<Motor.datosXML.cantidad;e++){var t=0;0==Contenedor.datosXML.sinaleatoriedad&&Scorm.modo!=Scorm.MODO_REVISAR&&Scorm.modo!=Scorm.MODO_REVISARALUMNO&&(t=Math.floor(Math.random()*Motor.datosXML.preguntas.length));var i=Motor.datosXML.preguntas[t];Motor.datosXML.preguntas.splice(t,1),this.addPagina(i,e)}this.contenedor.addChild(this.pagines[0].contenedor),this.currentPag=this.pagines[0],this.currentNumPag=0,this.loadVideo(),Main.stage.addChild(this.contenedor)},this.addPagina=function(e,t){var i=new Pagina(e,t);i.contenedor.y=this.INITIAL_Y,this.pagines.push(i)},this.deleteVideos=function(){$(".aulaplaneta").each(function(){$(this).remove()})}},this.createjs=this.createjs||{},function(){"use strict";var e=function(e,t){this.parent=t,this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.parent=!1,t.grandParent=!1,t.element_x=0,t.element_x=0,t.element_width=0,t.element_height=0,t.fontsize=0,t.htmlElement=null,t._oldMtx=null,t._visible=!1,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){"string"==typeof e&&(e=document.getElementById(e)),this.DisplayObject_initialize(),this.mouseEnabled=!1,this.htmlElement=e;var t=e.style;t.position="absolute",t.transformOrigin=t.WebkitTransformOrigin=t.msTransformOrigin=t.MozTransformOrigin=t.OTransformOrigin="0% 0%"},t.isVisible=function(){return null!=this.htmlElement},t.draw=function(e,t){return this.visible&&(this._visible=!0),!0},t.cache=function(){},t.uncache=function(){},t.updateCache=function(){},t.hitTest=function(){},t.localToGlobal=function(){},t.globalToLocal=function(){},t.localToLocal=function(){},t.clone=function(){throw"DOMElementCustom cannot be cloned."},t.toString=function(){return"[DOMElementCustom (name="+this.name+")]"},t.DisplayObject__tick=t._tick,t._tick=function(e){var t=this.getStage();this._visible=!1,t&&t.on("drawstart",this._reSizePosition,this,!0),t&&t.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(e)},t._handleDrawEnd=function(e){var t=this.htmlElement;if(t){var i=t.style,n=this._visible?"visible":"hidden";if(n!=i.visibility&&(i.visibility=n),this._visible){var a=this.getConcatenatedMatrix(this._matrix),s=this._oldMtx,o=1e4;if(s&&s.alpha==a.alpha||(i.opacity=""+(a.alpha*o|0)/o,s&&(s.alpha=a.alpha)),!s||s.tx!=a.tx||s.ty!=a.ty||s.a!=a.a||s.b!=a.b||s.c!=a.c||s.d!=a.d){var r="matrix("+(a.a*o|0)/o+","+(a.b*o|0)/o+","+(a.c*o|0)/o+","+(a.d*o|0)/o+","+(a.tx+.5|0);i.transform=i.WebkitTransform=i.OTransform=i.msTransform=r+","+(a.ty+.5|0)+")",i.MozTransform=r+"px,"+(a.ty+.5|0)+"px)",this._oldMtx=s?s.copy(a):a.clone()}}}},t._reSizePosition=function(){var e=$("#stage"),t=e.attr("height"),i=e.attr("width"),n=$("#wrapper").css("line-height").substring(0,e.css("line-height").lastIndexOf("px")),a=0;n>t&&"calculator"!=this.htmlElement.id&&(a=(n-t)/2/Main.scale),this.grandParent?(this.x=(this.grandParent.x+this.parent.x+this.element_x)/Main.scale*i/Main.stage_width-this.parent.x*Main.scale-this.grandParent.x*Main.scale,this.y=(this.grandParent.y+this.parent.y+this.element_y)/Main.scale*t/Main.stage_height+a-this.parent.y*Main.scale-this.grandParent.y*Main.scale):(this.x=(this.parent.x+this.element_x)/Main.scale*i/Main.stage_width-this.parent.x*Main.scale,this.y=(this.parent.y+this.element_y)/Main.scale*t/Main.stage_height+a-this.parent.y*Main.scale),"calculator"!=this.htmlElement.id&&(window.innerHeight>1e3?$(this.htmlElement).css("top",(window.innerHeight-t)/2):$(this.htmlElement).css("top",0)),"mediaHolder"==this.htmlElement.id?($videoAPI=$("#videoplayer").data("cepdaPlayer"),$videoAPI.resize(this.element_width/Main.scale*i/Main.stage_width,this.element_height/Main.scale*t/Main.stage_height)):($(this.htmlElement).css("height",this.element_height/Main.scale*t/Main.stage_height),$(this.htmlElement).css("width",this.element_width/Main.scale*i/Main.stage_width),$(this.htmlElement).css("font-size",Math.round(this.fontsize/Main.scale*i/Main.stage_width)))},createjs.DOMElementCustom=e}(),LangRes=new function(){this.lang=new Array,this.curLang="",this.REINTENTAR=0,this.SOLUCION=1,this.CORREGIR=2,this.SIGUIENTE=3,this.TIEMPORESTANTE=4,this.MASINFORMACION=5,this.RESULTADO=6,this.RESPCORRECTAS=7,this.RESPCORRECTAS_DE=8,this.PUNTUACION=9,this.TIEMPOEMPLEADO=10,this.CONTINUAR=11,this.REINICIAR=12,this.ACEPTAR=13,this.CANCELAR=14,this.ABOUT=15,this.MSG_AGOTADOTIEMPO=16,this.MSG_REINTENTAR=17,this.MSG_REINTENTAR_AREVIEW=18,this.MSG_VALIDAR=19,this.MSG_VALIDARSINRESPONDER=20,this.init=function(){this.curLang="es",this.lang=this.lang_es},this.setLang=function(e){this.curLang=e,"en"==e?this.lang=this.lang_en:"val"==e?this.lang=this.lang_val:"gal"==e?this.lang=this.lang_gal:"cat"==e?this.lang=this.lang_cat:"eus"==e?this.lang=this.lang_eus:(this.curLang="es",this.lang=this.lang_es)},this.lang_es=["Reintentar","Solución","Corregir","Siguiente","TIEMPO RESTANTE","Más información","Resultado","Respuestas correctas:","de","Puntuación:","Tiempo empleado:","Continuar","Reiniciar","Aceptar","Cancelar","Ejercicio xxxx versión xxxx","Has agotado el tiempo. Si continúas, se almacenará la nota del ejercicio. Si reinicias, empezarás el ejercicio de nuevo.","¡Atención! Si reintentas, empezarás el ejercicio de nuevo.","Esta actividad ya ha sido entregada. Ahora puedes practicar tantas veces como quieras.","Si continúas, se almacenará la nota del ejercicio. Si quieres hacer alguna modificación, haz clic en Cancelar.","Hay preguntas sin responder. Si continúas, se almacenará la nota del ejercicio. Si quieres hacer alguna modificación, haz clic en Cancelar."],this.lang_val=["Reintenta","Solució","Corregeix","Següent","TEMPS RESTANT","Més informació","Resultat","Respostes correctes:","de","Puntuació:","Temps emprat:","Continua","Reinicia","D'acord","Cancel·la","Exercici xxxx versió xxxx","Has esgotat el temps. Si continues, s'emmagatzemarà la nota de l'exercici. Si reinicies, tornaràs a començar l'exercici.","Atenció! Si reintentes, tornaràs a començar l'exercici.","Aquesta activitat ja s'ha lliurat. Ara pots practicar tantes vegades com vullgues.","Si continues, s'emmagatzemarà la nota de l'exercici. Si vols fer alguna modificació, fes clic en Cancel·la.","Hi ha preguntes sense contestar. Si continues, s'emmagatzemarà la nota de l'exercici. Si vols fer alguna modificació, fes clic en Cancel·la."],this.lang_cat=["Reintenta","Solució","Corregeix","Següent","TEMPS RESTANT","Més informació","Resultat","Respostes correctes:","de","Puntuació:","Temps emprat:","Continua","Reinicia","D'acord","Cancel·la","Exercici xxxx versió xxxx","Has esgotat el temps. Si continues, s'emmagatzemarà la nota de l'exercici. Si reinicies, tornaràs a començar l'exercici.","Atenció! Si reintentes, tornaràs a començar l'exercici.","Aquesta activitat ja s'ha lliurat. Ara pots practicar tantes vegades com vulguis.","Si continues, s'emmagatzemarà la nota de l'exercici. Si vols fer alguna modificació, fes clic a Cancel·la.","Hi ha preguntes sense contestar. Si continues, s'emmagatzemarà la nota de l'exercici. Si vols fer alguna modificació, fes clic a Cancel·la."],this.lang_gal=["Tentar de novo","Solución","Corrixir","Seguinte","TEMPO RESTANTE","Máis información","Resultado","Respostas correctas:","de","Puntuación:","Tempo empregado:","Continuar","Reiniciar","Aceptar","Cancelar","Exercicio xxxx versión xxxx","Esgotaches o tempo. Se continúas, almacenarase a nota do exercicio. Se reinicias, empezarás o exercicio de novo.","Atención! Se o volves tentar, empezarás o exercicio de novo.","Xa se entregou esta actividade. Agora podes practicar tantas veces como queiras.","Se continúas, almacenarase a nota do exercicio. Se queres facer algunha modificación, fai clic en Cancelar.","Hai preguntas sen responder. Se continúas, almacenarase a nota do exercicio. Se queres facer algunha modificación, fai clic en Cancelar."],this.lang_en=["Retry","Answer","Correct exercise","Next","TIME REMAINING","More information","Score","Correct answers:","of","Score:","Time taken:","Continue","Restart","OK","Cancel","Exercise xxxx version xxxx","You have run out of time. If you continue, your score will be saved. If you restart, you'll begin the exercise again.","Watch out! If you restart, you'll begin the exercise again.","This activity has been delivered. Now you can practice as many times as you want.","If you continue, your exercise score will be saved. If you want to make any changes, click Cancel.","Some questions have not been answered. If you continue, your exercise score will be saved. In case you want to make any changes, click Cancel."],
this.lang_eus=["Saiatu berriro","Erantzuna","Zuzendu ariketa","Hurrengoa","GELDITZEN DEN DENBORA","Informazio gehiago","Emaitza","Erantzun zuzenak:","/","Puntuazioa:","Erabilitako denbora:","Jarraitu","Berrabiarazi","Ados","Utzi","xxxx ariketa, xxxx bertsioa","Denbora agortu zaizu. Jarraituz gero, puntuazioa gordeko da. Berrabiaraziz gero, berriro hasiko duzu ariketa.","Kontuz! Berrabiaraziz gero, berriro hasiko duzu ariketa.","Ariketa entregatu duzu jada. Orain, nahi bezainbeste aldiz egin dezakezu.","Ariketa entregatu duzu jada. Orain, nahi bezainbeste aldiz egin dezakezu.","Ez zaie galdera batzuei erantzun. Jarraituz gero, ariketaren puntuazioa gordeko da. Aldaketarik egin nahi izanez gero, sakatu Utzi."]},Main=new function(){this.stage="",this.navegador="",this.mobil="",this.stage_width=950,this.stage_height=608,this.scale=1,this.text_Y=0,this.text_X=0,this.refresh=function(e){Main.stage.update()},this.setFocus=function(e){Main.input=e},this.init=function(){this.stage=new createjs.Stage("stage"),this.navegador=Main.detectBrowser(),this.mobil=Main.detectDevice();var e=this.stage.canvas,t=e.getContext("2d"),i=this,n=!1,a=setInterval(function(){n&&(clearInterval(a),i.continueInit());try{t.measureText("MEASURE ME"),n=!0}catch(e){}},100)},this.continueInit=function(){createjs.Touch.enable(this.stage),this.stage.enableMouseOver(),Scorm.init(aulaPlaneta.SCORM.initialize()),Contenedor.cargarDatos(),createjs.Ticker.addEventListener("tick",this.refresh),Main.windowResize(),setTimeout(Main.windowResize,100),this.stage.update()},this.switchBrowser=function(){var e=this.navegador.split(" ")[0];switch(e){case"Firefox":break;case"IE":break;case"Chrome":break;case"Safari":}},this.detectBrowser=function(){var e,t=navigator.userAgent,i=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(i[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===i[1]&&(e=t.match(/\bOPR\/(\d+)/),null!=e)?"Opera "+e[1]:(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&i.splice(1,1,e[1]),i.join(" "))},this.detectDevice=function(){return navigator.userAgent.match(/Android/i)?"Android":navigator.userAgent.match(/webOS/i)?"webOS":navigator.userAgent.match(/iPhone/i)?"iPhone":navigator.userAgent.match(/iPad/i)?"iPad":navigator.userAgent.match(/iPod/i)?"iPod":navigator.userAgent.match(/BlackBerry/i)?"BlackBerry":navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.match(/iemobile/i)||navigator.userAgent.match(/windows mobile/i)?"Windows":"PC"},this.windowResize=function(){var e=window.innerWidth,t=window.innerHeight,i=Main.stage_width,n=Main.stage_height;Main.scale=Math.min(e/i,t/n),Main.stage.scaleX=Main.scale,Main.stage.scaleY=Main.scale,Main.stage.canvas.width=i*Main.scale,Main.stage.canvas.height=n*Main.scale,$("#wrapper").css("line-height",t+"px")}},window.addEventListener("resize",Main.windowResize,!1);