/* VERSION : 15.12.22.1 */ 
var pppUI;(function(a){(function(i){function h(n,p,o,m,r){if(typeof r==="undefined"){r=true}var q=new a.UIObject(n);q.addClass(o);if(r&&TLF.isTLF(p)){q.addClass("tlfText");q.setContent(TLF.toHTML(p,function(s){if(window.hasOwnProperty("pppPreloader")){return pppPreloader.from("data",FUtils.realResourcePath(s))}else{return FUtils.realResourcePath(s)}}))}else{if(window.hasOwnProperty("pppPreloader")){p=FUtils.patchHTMLForPreloader(p)}q.setContent(p)}q.position=m;return q}i.createTextBox=h;function g(n,s,q,m,p,r){var o=new a.UIButton(n,q,p,s);o.command=r;o.position=m;return o}i.createEventButton=g;function l(u,q,v,m,t,n,s){if(typeof s==="undefined"){s=a.UIButton.BUTTON}var o;var r=new Array();for(o=0;o<t.length;o++){var p=new a.UIButton(t[o].id,t[o].className,s,t[o].content);if(m){p.x=q.x;p.y=q.y+o*v}else{p.x=q.x+o*v;p.y=q.y}p.width=q.width;p.height=q.height;p.visible=t[o].visible;p.command=n;u.addChild(p);r.push(p)}return r}i.createButtonList=l;function f(p,s,r,q){if(typeof q==="undefined"){q=a.UIButton.BUTTON}var o;var n=new Array();for(o=0;o<s.length;o++){var m=new a.UIButton(s[o].id,s[o].className,q,s[o].content);m.position=s[o].position;m.visible=s[o].visible;m.command=r;p.addChild(m);n.push(m)}return n}i.createButtonListVarPos=f;function e(r,m,n,t,s){var q;var p=new Array();for(q=0;q<t.length;q++){var o=new a.UIButton(t[q].id,t[q].className,a.UIButton.BUTTON,t[q].content);o.x=m.x;o.y=m.y+q*n;o.width=m.width;o.height=m.height;o.visible=t[q].visible;o.command=s;r.addChild(o);p.push(o)}return p}i.createButtonColumn2=e;function d(v,r,n,m,u,w,o){var p;var s=r.y;var t=new Array();for(p=0;p<u.length&&p<w;p++){var q=new a.UIButton(u[p].id,u[p].className,2,u[p].content);q.x=(p<u.length/2)?r.x:r.x+n;q.y=s+Math.floor(p%(u.length/2))*m;q.width=r.width;q.height=r.height;q.visible=u[p].visible;q.command=o;v.addChild(q);t.push(q)}return t}i.createButton2Columns=d;function j(v,q,x,n,u,o,p,t,r,w){if(typeof r==="undefined"){r="slideContainer"}if(typeof w==="undefined"){w=""}var m=new a.UISlider(r);m.addClass(w);m.position=t;v.addChild(m);var s=l(v,q,x,n,u,o,p);s.push(m);return s}i.createButtonsTabs=j;function c(n,m){if(n==null||n.DOMItem==null){return}var o=n.DOMItem;if(n instanceof a.UIRichText){o=n.$DOMItem.find("#realContent")[0];if(o==null){return}}if((o.scrollHeight-o.clientHeight)>3){var p=new a.UIImage("scrollMarker","","motor/images/scrollmarkertrans.png",a.UIImage.ADJUSTMODE_NONE,39,39);p.x=n.x+n.width-39-((m)?10:20);p.y=n.y+n.height-39-10;p.visible=false;n.parent.addChild(p);p.fadeIn(600);setTimeout(function(){if(p.DOMItem){p.fadeOut(500,function(){if(p.DOMItem){p.remove()}})}},2000)}}function k(o,n){var m=(navigator.userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|Touch/i)!=null);var p=(navigator.userAgent.match(/Trident/i)!=null)&&(navigator.userAgent.match(/Touch/i)!=null);if(n==true&&m==false||p){return}setTimeout(function(){c(o,m)},500)}i.showScrollMarker=k})(a.Utils||(a.Utils={}));var b=a.Utils})(pppUI||(pppUI={}));var FUtils;(function(b){function d(h){if((h.indexOf("data/imagenes/")==0)||(h.indexOf("data/sonidos/")==0)||(h.indexOf("data/videos/")==0)||(h.indexOf("data/recursos/")==0)||(h.indexOf("data/actividades/")==0)||(h=="data/datos.xml")){return h}if(h.indexOf("medias/")==0){h=h.substring("medias/".length)}var g=h.substr(h.lastIndexOf(".")+1).toLowerCase();switch(g){case"jpg":case"jpeg":case"gif":case"png":case"svg":case"bmp":return"data/imagenes/"+h;case"swf":return"data/imagenes/"+h.replace(/\.swf/i,".png");case"mp4":return"data/videos/"+h;case"flv":return"data/videos/"+h.replace(/\.flv/i,".mp4");case"mp3":case"wav":return"data/sonidos/"+h;case"zip":return"data/actividades/"+h.replace(/\.zip/,"_zip")+"/Principal.html";case"xml":return"data/"+h;default:return"data/imagenes/"+h}}b.realResourcePath=d;var f={blocks:[{type:"img",files:[]}],spinner:"no",waitForDocumentReady:false,onEndLoading:null};function e(j,h){if(j==null||j==undefined||h==null||h==undefined||j==""||h==""){return}for(var g=0;g<f.blocks[0].files.length;g++){if(f.blocks[0].files[g].from==j&&f.blocks[0].files[g].file==h){return}}f.blocks[0].files.push({from:j,file:h})}b.addImageToPreloader=e;function a(g){if(f.blocks[0].files.length==0){g(f)}else{f.onEndLoading=g;pppPreloader.loadManifest(f)}}b.preloadImages=a;function c(i){var h='src="'+pppPreloader.from("data","data/imagenes/");var g="src='"+pppPreloader.from("data","data/imagenes/");i=i.replace(/src="data\/imagenes\//g,h);i=i.replace(/src='data\/imagenes\//g,g);return i}b.patchHTMLForPreloader=c})(FUtils||(FUtils={}));var stage;var respCorrecta="Respuesta correcta.";var respIncorrecta="Respuesta incorrecta.";var MAIN_TITLE_POS={x:90,y:9,width:767,height:77};var MAIN_IMAGE_POS={x:50,y:100,width:850,height:435};var MAIN_TEXT_POS={x:100,y:80,width:750,height:435};var TOOLBAR_BTN_POS={x:43,y:555,width:37,height:37};var TOOLBAR_BTN_SEP=44;var TEST_TITLE_POS={x:82+35,y:12,width:826,height:72};var TEST_IMAGE_POS={x:100,y:80,width:750,height:365};var TEST_BUTTONS_POS={x:100,y:469,width:177,height:53};var TEST_BUTTONS_SEP=191;var TEST_BUTTONS_SEPY=12;var POPUPRESP_POS={x:259-7,y:202,width:432+15,height:157};var POPUPRESP_CLOSEBUT_POS={x:392+13,y:4,width:37,height:37};var POPUPRESP_CONTENT_POS={x:15,y:12,width:394,height:134};var POPUPINFO_POS={x:0,y:0,width:950,height:608};var POPUPINFO_CLOSEBUTT_POS={x:876,y:45,width:37,height:37};var POPUPINFO_CONTENT_POS={x:75,y:92,width:795,height:475};var POPUPINFO_CONTENT_TEXT_POS={x:0,y:0,width:430,height:475};var POPUPINFO_CONTENT_IMAGE_POS={x:465,y:0,width:330,height:475};var WATERMARK_POS={x:20,y:20,width:62,height:62};var RESPICON_NONE=0;var RESPICON_OK=1;var RESPICON_KO=2;function createRespPopup(k,j,f){var a=new pppUI.UIPopup("resp_okko","popupRespBkTrans",false);var l=new pppUI.UIObject("popupContent");l.position={x:0,y:0,width:pppUI.UIStage.DP_WIDTH,height:pppUI.UIStage.DP_HEIGHT};a.addChild(l);a.alpha=0;var i=f+POPUPRESP_POS.width-POPUPRESP_CONTENT_POS.width;var c=new pppUI.UIObject("fondo");c.addClass("popupRespBk");c.position={x:(stage.stageWidth-i)/2,y:POPUPRESP_POS.y,width:i,height:POPUPRESP_POS.height};l.addChild(c);var h="";var g="";if(k==RESPICON_OK){h=pppPreloader.from("module","motor/images/f4_popup_resp_ok.png");g="<b>"+respCorrecta+"</b>";if(j!=null&&j!=""){g+="<br/ > "+j}}else{if(k==RESPICON_KO){h=pppPreloader.from("module","motor/images/f4_popup_resp_ko.png");g="<b>"+respIncorrecta+"</b>";if(j!=null&&j!=""){g+="<br/ > "+j}}else{h="";g=j}}g=FUtils.patchHTMLForPreloader(g);var e="<table style='width: 100%;'><tr><td style='vertical-align:middle;'><table><tr>";if(h!=""){e+="<td style='width: 75px; vertical-align: middle;'><img src=\""+h+'"/></td>'}e+="<td style='vertical-align: middle;'>"+g+"</td></tr></table></td></tr></table>";var d=new pppUI.UIObject("content");d.addClass("popupRespText");d.x=POPUPRESP_CONTENT_POS.x;d.y=POPUPRESP_CONTENT_POS.y;d.width=f;d.setContent(e);c.addChild(d);var b=new pppUI.UIButton("closeButton","popupCloseButton",pppUI.UIButton.BUTTON,"");b.position={x:POPUPRESP_CLOSEBUT_POS.x+(f-POPUPRESP_CONTENT_POS.width),y:POPUPRESP_CLOSEBUT_POS.y,width:POPUPRESP_CLOSEBUT_POS.width,height:POPUPRESP_CLOSEBUT_POS.height};b.command=function(m,n){stage.closePopup()};c.addChild(b);setTimeout(function(){var m=d.$DOMItem.height();c.height=m+POPUPRESP_CONTENT_POS.x*2;c.y=(pppUI.UIStage.DP_HEIGHT-c.height)/2;a.alpha=1},200);return a}function createInfoPopup(g,h){var a=new pppUI.UIPopup("resp_okko","popupInfoBk",false);var i=new pppUI.UIObject("popupContent");i.addClass("popupInfo");i.position={x:0,y:0,width:pppUI.UIStage.DP_WIDTH,height:pppUI.UIStage.DP_HEIGHT};a.addChild(i);var f=new pppUI.UIObject("content");f.position=POPUPINFO_CONTENT_POS;i.addChild(f);var e=null;if(h==null||h==undefined||h.trim()==""){e=new pppUI.UIRichText("txt","",FUtils.patchHTMLForPreloader(g));e.position={x:0,y:0,width:POPUPINFO_CONTENT_POS.width,height:POPUPINFO_CONTENT_POS.height};f.addChild(e)}else{var d=new pppUI.UIImage("img","",pppPreloader.from("data",FUtils.realResourcePath(h)),pppUI.UIImage.ADJUSTMODE_RESIZE,POPUPINFO_CONTENT_IMAGE_POS.width,POPUPINFO_CONTENT_IMAGE_POS.height,pppUI.UIImage.ALIGN_CENTER|pppUI.UIImage.ALIGN_MIDDLE);d.position=POPUPINFO_CONTENT_IMAGE_POS;f.addChild(d);e=new pppUI.UIRichText("txt","",FUtils.patchHTMLForPreloader(g));e.position=POPUPINFO_CONTENT_TEXT_POS;f.addChild(e)}var b=new pppUI.UIButton("closeButton","popupCloseButton",pppUI.UIButton.BUTTON,"");b.position=POPUPINFO_CLOSEBUTT_POS;b.command=function(j,k){stage.closePopup()};i.addChild(b);var c=new pppUI.UIObject("watermark");c.addClass("watermark");c.position=WATERMARK_POS;i.addChild(c);a.onShown=function(j){if(e!=null){pppUI.Utils.showScrollMarker(e,true)}};return a}function createOptionButton(e,c){var b={fontSize:true};var d=TLF.isTLF(c);if(d){c=TLF.toHTML(c,function(f){return pppPreloader.from("data",FUtils.realResourcePath(f))},b)}c=c.replace("</span><span","</span><br/><span");var a=new pppUI.UITextButton(e,"roundtextbutton",pppUI.UIButton.BUTTON,c,true,2);if(d){a.addClass("tlfText")}return a}function createTestPreg(p,l,a){var r;var b=new pppUI.UISlide(p);var w=l.getAttribute("title")||"";var x=l.getAttribute("path")||"";var m=$(l).children("text").text();var n=new pppUI.UISimpleText("title","popupTestTitle",w);n.position=TEST_TITLE_POS;n.alignMode=pppUI.UISimpleText.ALIGN_LEFT|pppUI.UISimpleText.ALIGN_MIDDLE;b.addChild(n);var g=n.autoHeight();if(g<40){n.height=TEST_TITLE_POS.height}var f=$(l).children("answers")[0];var j=$(f).children("answer").length;var c=false;var h=0;for(r=0;r<j;r++){var u=$(f).children("answer")[r];if(u.getAttribute("correct")=="true"||u.getAttribute("correct")=="1"){c=true}var s=$(u).children("text").text();if(!(s==null||s==undefined||s=="")){h++}}var k=0;if(h<4){var q=TEST_BUTTONS_SEP*(h-1)+TEST_BUTTONS_POS.width;k=Math.floor((950-q)/2-TEST_BUTTONS_POS.x)}$(f).children("answer").each(function(C,i){var D=$(i).children("text").text();if(D==null||D==undefined||D==""){return}var z=$(i).children("explanation")[0];var y=$(i).children("explanation").text();var A=parseInt(z.getAttribute("width")||(""+POPUPRESP_CONTENT_POS.width));var B=(i.getAttribute("correct")=="true"||i.getAttribute("correct")=="1");var F=createOptionButton("answer"+C,D);var E=RESPICON_NONE;if(c){E=B?RESPICON_OK:RESPICON_KO}F.extra={icon:E,explanation:y,explanation_width:A};if(h<=4||C>=4){F.position={x:k+TEST_BUTTONS_POS.x+TEST_BUTTONS_SEP*(C%4),y:TEST_BUTTONS_POS.y,width:TEST_BUTTONS_POS.width,height:a}}else{F.position={x:k+TEST_BUTTONS_POS.x+TEST_BUTTONS_SEP*(C%4),y:TEST_BUTTONS_POS.y-a-TEST_BUTTONS_SEPY,width:TEST_BUTTONS_POS.width,height:a}}F.command=function(H,J){var I=J.extra;var G=createRespPopup(I.icon,I.explanation,I.explanation_width);stage.openPopup(G);if(window.hasOwnProperty("MathJax")){MathJax.Hub.Queue(["Typeset",MathJax.Hub])}};b.addChild(F)});var e=TEST_IMAGE_POS.y;var t=TEST_IMAGE_POS.height;if(g>TEST_TITLE_POS.height){var v=g-a+TEST_BUTTONS_SEPY;e+=v;t-=v}if(h>4){t-=a+TEST_BUTTONS_SEPY}if(x!=null&&x!=undefined&&x.trim()!=""){var o=new pppUI.UIImage("img","",pppPreloader.from("data",FUtils.realResourcePath(x)),pppUI.UIImage.ADJUSTMODE_RESIZE,TEST_IMAGE_POS.width,t,(pppUI.UIImage.ALIGN_CENTER|pppUI.UIImage.ALIGN_BOTTOM));o.position={x:TEST_IMAGE_POS.x,y:e,width:TEST_IMAGE_POS.width,height:t};b.addChild(o)}if(m!=null&&m!=""){var d=new pppUI.UIRichText("text","defaultRichText",FUtils.patchHTMLForPreloader(m));d.position={x:TEST_IMAGE_POS.x,y:e,width:TEST_IMAGE_POS.width,height:t};b.addChild(d);b.onPrepare=function(i){pppUI.Utils.showScrollMarker(d,true)}}return b}function createTest(i,f,e){var k=new pppUI.UISlider(i);k.transMode=pppUI.UISlider.TRANS_NONE;k.position={x:0,y:0,width:pppUI.UIStage.DP_WIDTH,height:pppUI.UIStage.DP_HEIGHT};f.addChild(k);var d=$(e).children("main")[0];var s=d.getAttribute("title")||"";var t=d.getAttribute("path")||"";var g=$(d).children("text").text();var a=parseInt(d.getAttribute("buttonsHeight")||"0");if(a==0){a=TEST_BUTTONS_POS.height}var o=new pppUI.UISlide("main");k.addSlide(o);var m=pppUI.Utils.createTextBox("title",s,"MainTitle",MAIN_TITLE_POS);o.addChild(m);if(t!=""){var b=new pppUI.UIImage("img","",pppPreloader.from("data",FUtils.realResourcePath(t)),pppUI.UIImage.ADJUSTMODE_RESIZE,MAIN_IMAGE_POS.width,MAIN_IMAGE_POS.height,pppUI.UIImage.ALIGN_CENTER|pppUI.UIImage.ALIGN_BOTTOM);b.position=MAIN_IMAGE_POS;o.addChild(b)}if(g!=null&&g!=""){var c=new pppUI.UIRichText("text","defaultRichText",FUtils.patchHTMLForPreloader(g));c.position=MAIN_TEXT_POS;o.addChild(c);pppUI.Utils.showScrollMarker(c,true)}var p=new Array();if($(d).children("info").length>0){var n=$(d).children("info")[0];var l=n.getAttribute("path")||"";var r=$($(n).children("text")[0]).text();if(r!=null&&r!=undefined&&r.trim()!=""){p.push(createInfoPopup(r,l))}else{p.push(null)}}else{p.push(null)}var q=$(e).children("questions")[0];respCorrecta=q.getAttribute("respCorrecta")||respCorrecta;respIncorrecta=q.getAttribute("respIncorrecta")||respIncorrecta;$(q).children("question").each(function(w,y){var u=createTestPreg(i+"_slide_"+w,y,a);if(u!=null){k.addSlide(u)}if($(y).children("info").length>0){var z=$(y).children("info")[0];var x=z.getAttribute("path")||"";var v=$($(z).children("text")[0]).text();if(v!=null&&v!=undefined&&v.trim()!=""){p.push(createInfoPopup(v,x))}else{p.push(null)}}else{p.push(null)}});var j=[{id:"home_"+i,className:"sliderhomebutton",content:"",visible:false,position:TOOLBAR_BTN_POS},{id:"prev_"+i,className:"sliderprevbutton",content:"",visible:false,position:{x:TOOLBAR_BTN_POS.x+32+30,y:TOOLBAR_BTN_POS.y,width:TOOLBAR_BTN_POS.width,height:TOOLBAR_BTN_POS.height}},{id:"next_"+i,className:"slidernextbutton",content:"",visible:true,position:{x:TOOLBAR_BTN_POS.x+32+30+32+20,y:TOOLBAR_BTN_POS.y,width:TOOLBAR_BTN_POS.width,height:TOOLBAR_BTN_POS.height}},{id:"info_"+i,className:"infoButton",content:"",visible:(p[0]!=null),position:{x:TOOLBAR_BTN_POS.x+32+30+32+20+32+30,y:TOOLBAR_BTN_POS.y,width:TOOLBAR_BTN_POS.width,height:TOOLBAR_BTN_POS.height}}];var h=pppUI.Utils.createButtonListVarPos(f,j,function(v,w){var u=w.id.substring(4,w.id.length);switch(w.id.substring(0,4)){case"home":k.current=0;w.parent.getChildById("prev"+u).visible=false;w.parent.getChildById("info"+u).visible=(p[k.current]!=null);w.parent.getChildById("home"+u).visible=false;w.parent.getChildById("next"+u).visible=true;break;case"prev":k.prev();if(k.current==0){w.parent.getChildById("home"+u).visible=false}else{if(k.current==1){w.parent.getChildById("prev"+u).visible=false}}w.parent.getChildById("info"+u).visible=(p[k.current]!=null);w.parent.getChildById("next"+u).visible=true;break;case"next":k.next();if(k.current==(k.count-1)){w.parent.getChildById("next"+u).visible=false}w.parent.getChildById("prev"+u).visible=(k.current>1);w.parent.getChildById("info"+u).visible=(p[k.current]!=null);w.parent.getChildById("home"+u).visible=true;break;case"info":if(p[k.current]!=null){stage.openPopup(p[k.current]);if(window.hasOwnProperty("MathJax")){MathJax.Hub.Queue(["Typeset",MathJax.Hub])}}break}})}function main(b){var a=true;if(window.hasOwnProperty("pppUIScaled")){a=window.pppUIScaled}stage=new pppUI.UIStage("__stage","diaporama_container",a,false,function(c){var e=$(b).children("engine")[0];c.addClass("MainBk");createTest("test",c,e);var d=new pppUI.UIObject("watermark");d.addClass("watermark");d.position=WATERMARK_POS;c.addChild(d);if(window.hasOwnProperty("MathJax")){MathJax.Hub.Queue(["Typeset",MathJax.Hub])}FUtils.preloadImages(function(f){pppSpinner.hide()})})};