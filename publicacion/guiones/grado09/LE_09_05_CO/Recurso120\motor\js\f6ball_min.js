/* VERSION : 15.12.22.1 */ 
var pppUI;(function(a){(function(i){function h(n,p,o,m,r){if(typeof r==="undefined"){r=true}var q=new a.UIObject(n);q.addClass(o);if(r&&TLF.isTLF(p)){q.addClass("tlfText");q.setContent(TLF.toHTML(p,function(s){if(window.hasOwnProperty("pppPreloader")){return pppPreloader.from("data",FUtils.realResourcePath(s))}else{return FUtils.realResourcePath(s)}}))}else{if(window.hasOwnProperty("pppPreloader")){p=FUtils.patchHTMLForPreloader(p)}q.setContent(p)}q.position=m;return q}i.createTextBox=h;function g(n,s,q,m,p,r){var o=new a.UIButton(n,q,p,s);o.command=r;o.position=m;return o}i.createEventButton=g;function l(u,q,v,m,t,n,s){if(typeof s==="undefined"){s=a.UIButton.BUTTON}var o;var r=new Array();for(o=0;o<t.length;o++){var p=new a.UIButton(t[o].id,t[o].className,s,t[o].content);if(m){p.x=q.x;p.y=q.y+o*v}else{p.x=q.x+o*v;p.y=q.y}p.width=q.width;p.height=q.height;p.visible=t[o].visible;p.command=n;u.addChild(p);r.push(p)}return r}i.createButtonList=l;function f(p,s,r,q){if(typeof q==="undefined"){q=a.UIButton.BUTTON}var o;var n=new Array();for(o=0;o<s.length;o++){var m=new a.UIButton(s[o].id,s[o].className,q,s[o].content);m.position=s[o].position;m.visible=s[o].visible;m.command=r;p.addChild(m);n.push(m)}return n}i.createButtonListVarPos=f;function e(r,m,n,t,s){var q;var p=new Array();for(q=0;q<t.length;q++){var o=new a.UIButton(t[q].id,t[q].className,a.UIButton.BUTTON,t[q].content);o.x=m.x;o.y=m.y+q*n;o.width=m.width;o.height=m.height;o.visible=t[q].visible;o.command=s;r.addChild(o);p.push(o)}return p}i.createButtonColumn2=e;function d(v,r,n,m,u,w,o){var p;var s=r.y;var t=new Array();for(p=0;p<u.length&&p<w;p++){var q=new a.UIButton(u[p].id,u[p].className,2,u[p].content);q.x=(p<u.length/2)?r.x:r.x+n;q.y=s+Math.floor(p%(u.length/2))*m;q.width=r.width;q.height=r.height;q.visible=u[p].visible;q.command=o;v.addChild(q);t.push(q)}return t}i.createButton2Columns=d;function j(v,q,x,n,u,o,p,t,r,w){if(typeof r==="undefined"){r="slideContainer"}if(typeof w==="undefined"){w=""}var m=new a.UISlider(r);m.addClass(w);m.position=t;v.addChild(m);var s=l(v,q,x,n,u,o,p);s.push(m);return s}i.createButtonsTabs=j;function c(n,m){if(n==null||n.DOMItem==null){return}var o=n.DOMItem;if(n instanceof a.UIRichText){o=n.$DOMItem.find("#realContent")[0];if(o==null){return}}if((o.scrollHeight-o.clientHeight)>3){var p=new a.UIImage("scrollMarker","","motor/images/scrollmarkertrans.png",a.UIImage.ADJUSTMODE_NONE,39,39);p.x=n.x+n.width-39-((m)?10:20);p.y=n.y+n.height-39-10;p.visible=false;n.parent.addChild(p);p.fadeIn(600);setTimeout(function(){if(p.DOMItem){p.fadeOut(500,function(){if(p.DOMItem){p.remove()}})}},2000)}}function k(o,n){var m=(navigator.userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|Touch/i)!=null);var p=(navigator.userAgent.match(/Trident/i)!=null)&&(navigator.userAgent.match(/Touch/i)!=null);if(n==true&&m==false||p){return}setTimeout(function(){c(o,m)},500)}i.showScrollMarker=k})(a.Utils||(a.Utils={}));var b=a.Utils})(pppUI||(pppUI={}));var FUtils;(function(b){function d(h){if((h.indexOf("data/imagenes/")==0)||(h.indexOf("data/sonidos/")==0)||(h.indexOf("data/videos/")==0)||(h.indexOf("data/recursos/")==0)||(h.indexOf("data/actividades/")==0)||(h=="data/datos.xml")){return h}if(h.indexOf("medias/")==0){h=h.substring("medias/".length)}var g=h.substr(h.lastIndexOf(".")+1).toLowerCase();switch(g){case"jpg":case"jpeg":case"gif":case"png":case"svg":case"bmp":return"data/imagenes/"+h;case"swf":return"data/imagenes/"+h.replace(/\.swf/i,".png");case"mp4":return"data/videos/"+h;case"flv":return"data/videos/"+h.replace(/\.flv/i,".mp4");case"mp3":case"wav":return"data/sonidos/"+h;case"zip":return"data/actividades/"+h.replace(/\.zip/,"_zip")+"/Principal.html";case"xml":return"data/"+h;default:return"data/imagenes/"+h}}b.realResourcePath=d;var f={blocks:[{type:"img",files:[]}],spinner:"no",waitForDocumentReady:false,onEndLoading:null};function e(j,h){if(j==null||j==undefined||h==null||h==undefined||j==""||h==""){return}for(var g=0;g<f.blocks[0].files.length;g++){if(f.blocks[0].files[g].from==j&&f.blocks[0].files[g].file==h){return}}f.blocks[0].files.push({from:j,file:h})}b.addImageToPreloader=e;function a(g){if(f.blocks[0].files.length==0){g(f)}else{f.onEndLoading=g;pppPreloader.loadManifest(f)}}b.preloadImages=a;function c(i){var h='src="'+pppPreloader.from("data","data/imagenes/");var g="src='"+pppPreloader.from("data","data/imagenes/");i=i.replace(/src="data\/imagenes\//g,h);i=i.replace(/src='data\/imagenes\//g,g);return i}b.patchHTMLForPreloader=c})(FUtils||(FUtils={}));var stage;var LAYOUTS=[{width:400,height:250,positions:[{x:53,y:146},{x:497,y:146}]},{width:277,height:182,positions:[{x:35,y:182},{x:338,y:182},{x:641,y:182}]},{width:277,height:182,positions:[{x:122,y:86},{x:552,y:86},{x:122,y:324},{x:552,y:324}]},{width:277,height:182,positions:[{x:35,y:88},{x:338,y:88},{x:641,y:88},{x:174,y:329},{x:477,y:329}]},{width:277,height:182,positions:[{x:35,y:91},{x:338,y:91},{x:641,y:91},{x:35,y:334},{x:338,y:334},{x:641,y:334}]},{width:218,height:143,positions:[{x:27,y:107},{x:256,y:107},{x:483,y:107},{x:711,y:107},{x:141,y:324},{x:370,y:324},{x:597,y:324}]},{width:218,height:143,positions:[{x:27,y:107},{x:256,y:107},{x:483,y:107},{x:711,y:107},{x:27,y:334},{x:256,y:334},{x:483,y:334},{x:711,y:334}]},{width:298,height:332,positions:[{x:104,y:115},{x:545,y:115}]},{width:277,height:321,positions:[{x:35,y:139},{x:337,y:139},{x:639,y:139}]},{width:197,height:182,positions:[{x:124,y:86},{x:586,y:86},{x:124,y:333},{x:586,y:333}]},{width:197,height:182,positions:[{x:114,y:86},{x:347,y:86},{x:590,y:86},{x:231,y:333},{x:496,y:333}]},{width:197,height:182,positions:[{x:114,y:86},{x:347,y:86},{x:590,y:86},{x:114,y:326},{x:347,y:326},{x:590,y:326}]},{width:197,height:182,positions:[{x:27,y:88},{x:259,y:88},{x:492,y:88},{x:726,y:88},{x:144,y:333},{x:375,y:333},{x:608,y:333}]},{width:197,height:182,positions:[{x:27,y:86},{x:259,y:86},{x:492,y:86},{x:726,y:86},{x:27,y:322},{x:259,y:322},{x:492,y:322},{x:726,y:322}]}];var MAIN_TITLE_POS={x:90,y:9,width:767,height:77};var MAIN_FOOTER_POS={x:0,y:570,width:950,height:30};var SUBMENU_BUT_POS={x:62,y:568,width:37,height:37};var SUBMENU_BUT_SEPX=43;var PAGE_TITLE_POS={x:100,y:48,width:882,height:110};var PAGE_BK_POS={x:0,y:165,width:950,height:376};var PAGE_IMGSLIDER_POS={x:46,y:165,width:250,height:376};var PAGE_IMGSLIDER_TOOLBAR_POS={x:197,y:500,width:37,height:37};var PAGE_IMGSLIDER_TOOLBAR_SEPX=36;var PAGE_IMGSLIDER_ZOOM_POS={x:208,y:6,width:37,height:37};var PAGE_TEXT_POS={x:347,y:165,width:575-40,height:376};var PAGE_TOOLBAR_POS={x:46,y:552,width:37,height:37};var PAGE_TOOLBAR_SEPX=37+20;var PAGE_BTNPRACTICA_POS={x:744,y:555,width:161,height:37};var POPUPIMAGEN_CLOSEBUT_POS={x:883,y:36,width:37,height:37};var TESTPAGE_TXT_POS={x:75,y:95,width:820,height:160};var TESTPAGE_BTNS_POS={x:380,y:547,width:161,height:37};var TESTPAGE_BTNS_SEPX=187;var TESTPAGE_RESPS_POS={x:85,y:239,width:760,height:32};var TESTPAGE_RESPS_SEPY=60;var TESTPAGE_RESP_SIZE={width:759,height:32};var POPUPRESP_POS={x:322,y:229,width:330,height:180};var POPUPRESP_CLOSEBUT_POS={x:612-322-3,y:235-229-3,width:37,height:37};var POPUPRESP_IMG_POS={x:353-322,y:302-229,width:60,height:48};var POPUPRESP_TXT_POS={x:448-322,y:284-229,width:250,height:83};var POPUPRESP_COLOR_OK="#41A62A";var POPUPRESP_COLOR_KO="#E1001A";var POPUPFRAG_POS={x:173,y:113,width:628,height:388};var POPUPFRAG_CLOSEBUTT_POS={x:758-173-5,y:129-113-7,width:37,height:37};var POPUPFRAG_TITLE_POS={x:214-173,y:127-113,width:530,height:45};var POPUPFRAG_TEXT_POS={x:214-173,y:182-113,width:569,height:293};var WATERMARK_POS={x:20,y:20,width:62,height:62};function createRespPopup(h){var a=new pppUI.UIPopup("resp_okko","popupRespBkTrans",false);var i=new pppUI.UIObject("popupContent");i.position={x:0,y:0,width:pppUI.UIStage.DP_WIDTH,height:pppUI.UIStage.DP_HEIGHT};a.addChild(i);var c=new pppUI.UIObject("fondo");c.addClass("popupRespBk");c.position=POPUPRESP_POS;i.addChild(c);var b=new pppUI.UIButton("closeButton","popupCloseButton",pppUI.UIButton.BUTTON,"");b.position=POPUPRESP_CLOSEBUT_POS;b.command=function(j,k){stage.closePopup()};c.addChild(b);var g=pppPreloader.from("module","motor/images/f6b_popup_resp_ko.png");var f="<span style='color:"+POPUPRESP_COLOR_KO+";'>Respuesta incorrecta</span>";if(h){g=pppPreloader.from("module","motor/images/f6b_popup_resp_ok.png");f="<span style='color:"+POPUPRESP_COLOR_OK+";'>Respuesta correcta</span>"}var e=new pppUI.UIImage("icon","",g,pppUI.UIImage.ADJUSTMODE_NONE);e.position=POPUPRESP_IMG_POS;c.addChild(e);var d=new pppUI.UIObject("txt");d.position=POPUPRESP_TXT_POS;d.addClass("popupRespText");d.setContent(f);c.addChild(d);return a}var respPopupOK=createRespPopup(true);var respPopupKO=createRespPopup(false);function createFragPopup(h,g){var c=new pppUI.UIPopup("resp_okko","popupRespBkTrans",false);var b=new pppUI.UIObject("popupContent");b.position={x:0,y:0,width:pppUI.UIStage.DP_WIDTH,height:pppUI.UIStage.DP_HEIGHT};c.addChild(b);var f=new pppUI.UIObject("fondo");f.addClass("popupRespBk");f.position=POPUPFRAG_POS;b.addChild(f);var d=new pppUI.UIButton("closeButton","popupCloseButton",pppUI.UIButton.BUTTON,"");d.position=POPUPFRAG_CLOSEBUTT_POS;d.command=function(i,j){stage.closePopup()};f.addChild(d);var e=pppUI.Utils.createTextBox("title",h,"pageTitle",POPUPFRAG_TITLE_POS);e.$DOMItem.css("height","");f.addChild(e);var a=pppUI.Utils.createTextBox("content",g,"",POPUPFRAG_TEXT_POS);a.$DOMItem.css("overflow-y","auto");a.addClass("padforscroll");a.alpha=0;f.addChild(a);c.onShown=function(i){var j=e.$DOMItem.height()-POPUPFRAG_TITLE_POS.height;if(j<20){j=-20}a.position={x:POPUPFRAG_TEXT_POS.x,y:POPUPFRAG_TEXT_POS.y+j,width:POPUPFRAG_TEXT_POS.width,height:POPUPFRAG_TEXT_POS.height-j};a.alpha=1;pppUI.Utils.showScrollMarker(a,true)};return c}function createTestPreg(c,a,j){var e=new pppUI.UISlide(c);var i=$($(a).children("text")[0]).text();var d=new pppUI.UISimpleText("title","popupTestTitle",i);d.alignMode=pppUI.UISimpleText.ALIGN_LEFT|pppUI.UISimpleText.ALIGN_TOP;d.position=TESTPAGE_TXT_POS;e.addChild(d);var g=$(a).children("answers")[0];var b=$(g).children("answer").length;$(g).children("answer").each(function(k,l){var p=$(l).text();var o=TLF.isTLF(p);if(o){p=TLF.toHTML(p,function(q){pppPreloader.from("data",FUtils.realResourcePath(q));FUtils.addImageToPreloader("data",FUtils.realResourcePath(q))},{fontSize:true})}else{p=FUtils.patchHTMLForPreloader(p)}var m=new pppUI.UIButton("answer_"+k,"popupTestAnswer",pppUI.UIButton.CHECKBOX,p);if(o){m.addClass("tlfText")}var n=(l.getAttribute("correct")=="true");m.extra.correcta=n;m.position={x:TESTPAGE_RESPS_POS.x,y:TESTPAGE_RESPS_POS.y+TESTPAGE_RESPS_SEPY*k,width:TESTPAGE_RESP_SIZE.width,height:TESTPAGE_RESP_SIZE.height};m.command=function(t,u){var s=0;var r=false;while(u.parent.getChildById("answer_"+s)!=null){var q=u.parent.getChildById("answer_"+s);if(q.pushed==true){r=true}s++}u.parent.getChildById("val_"+c).enabled=r};e.addChild(m)});var f=[{id:"sol_"+c,className:"roundtextbutton",content:"Solución",visible:false},{id:"frg_"+c,className:"roundtextbutton",content:"Fragmento",visible:true},{id:"val_"+c,className:"roundtextbutton",content:"Validar",visible:true}];var h=pppUI.Utils.createButtonList(e,TESTPAGE_BTNS_POS,TESTPAGE_BTNS_SEPX,false,f,function(n,o){var k=o.id.substring(3,o.id.length);var m;var l;switch(o.id.substring(0,3)){case"sol":for(m=0;m<b;m++){l=e.getChildById("answer_"+m);if(l.extra.correcta==true){l.addClass("correcta")}else{l.addClass("incorrecta")}}break;case"frg":stage.openPopup(j);if(window.hasOwnProperty("MathJax")){MathJax.Hub.Queue(["Typeset",MathJax.Hub])}break;case"val":e.getChildById("sol_"+c).visible=true;for(m=0;m<b;m++){l=e.getChildById("answer_"+m);if(l.pushed!=l.extra.correcta){stage.openPopup(respPopupKO);return}}stage.openPopup(respPopupOK);break}});e.getChildById("val_"+c).enabled=false;e.onPrepare=function(m){m.getChildById("sol_"+c).visible=false;m.getChildById("val_"+c).enabled=false;for(var l=0;l<b;l++){var k=e.getChildById("answer_"+l);k.$DOMItem.removeClass("correcta");k.$DOMItem.removeClass("incorrecta");k.pushed=false}};return e}function createTestPopup(c,a,i){var b=new pppUI.UIPopup(c,"popupTestBk",false);var j=new pppUI.UIObject(c);j.position={x:0,y:0,width:pppUI.UIStage.DP_WIDTH,height:pppUI.UIStage.DP_HEIGHT};b.addChild(j);var d=new pppUI.UISlider(c);d.transMode=pppUI.UISlider.TRANS_NONE;d.position={x:0,y:0,width:pppUI.UIStage.DP_WIDTH,height:pppUI.UIStage.DP_HEIGHT};j.addChild(d);$(a).children("question").each(function(l,m){if(m.getAttribute("visible")=="true"){var k=createTestPreg(c+"_slide_"+l,m,i);if(k!=null){d.addSlide(k)}}});var e=new pppUI.UIButton("closeButton","popupCloseButton",pppUI.UIButton.BUTTON,"");e.position=POPUPIMAGEN_CLOSEBUT_POS;e.command=function(k,l){stage.closePopup()};j.addChild(e);if(d.count>1){var g=[{id:"prev_"+c,className:"sliderprevbutton",content:"",visible:false},{id:"next_"+c,className:"slidernextbutton",content:"",visible:(d.count>1?true:false)}];var h=pppUI.Utils.createButtonList(j,PAGE_TOOLBAR_POS,PAGE_TOOLBAR_SEPX,false,g,function(l,m){var k=m.id.substring(4,m.id.length);switch(m.id.substring(0,4)){case"prev":d.prev();if(d.current==0){m.parent.getChildById("prev"+k).visible=false}m.parent.getChildById("next"+k).visible=true;break;case"next":d.next();if(d.current==(d.count-1)){m.parent.getChildById("next"+k).visible=false}m.parent.getChildById("prev"+k).visible=true;break}});b.onPrepare=function(l){d.current=0;var m=l.getChildById(c).getChildById("prev_"+c);if(m!=null){m.visible=false}var k=l.getChildById(c).getChildById("next_"+c);if(k!=null){k.visible=(d.count>1)?true:false}}}var f=new pppUI.UIObject("watermark");f.addClass("watermark");f.position=WATERMARK_POS;j.addChild(f);return b}function createImagePopup(f,d){var c=new pppUI.UIPopup("popup","bkWhite",false);var b=new pppUI.UIObject("popupContent");b.position={x:0,y:0,width:pppUI.UIStage.DP_WIDTH,height:pppUI.UIStage.DP_HEIGHT};c.addChild(b);var g=new pppUI.UIImage("img","",pppPreloader.from("data",FUtils.realResourcePath(f)),pppUI.UIImage.ADJUSTMODE_RESIZE,800,460,pppUI.UIImage.ALIGN_CENTER|pppUI.UIImage.ALIGN_MIDDLE);FUtils.addImageToPreloader("data",FUtils.realResourcePath(f));g.x=75;g.y=75;b.addChild(g);var a=pppUI.Utils.createTextBox("pie",d,"popupPie",{x:75,y:535,width:800,height:75});b.addChild(a);var e=new pppUI.UIButton("closeButton","popupCloseButton",pppUI.UIButton.BUTTON,"");e.position=POPUPIMAGEN_CLOSEBUT_POS;e.command=function(h,i){stage.closePopup()};b.addChild(e);return c}function createImageslide(k,b,a){var i=new pppUI.UISlide(b);var j=a.getAttribute("path");if(j==null||j==""){return null}var h=a.getAttribute("pathbig")||"";if(h==""){h=j.replace(".jpg","_big.jpg");h=h.replace(".jpeg","_big.jpeg");h=h.replace(".png","_big.png");h=h.replace(".gif","_big.gif")}var d=$($(a).children("title")[0]).text();var g=a.getAttribute("border");var e=a.getAttribute("zoomEnabled");var f=new pppUI.UIImage("img","",pppPreloader.from("data",FUtils.realResourcePath(j)),pppUI.UIImage.ADJUSTMODE_CROP,PAGE_IMGSLIDER_POS.width,PAGE_IMGSLIDER_POS.height);FUtils.addImageToPreloader("data",FUtils.realResourcePath(j));if(g=="true"||g=="1"){f.addClass("imageBordered")}i.addChild(f);if(e=="true"&&h!=null&&h!=""){var c=new pppUI.UIButton("btnOpenPopup","popupOpenButton",pppUI.UIButton.BUTTON,"");c.position=PAGE_IMGSLIDER_ZOOM_POS;c.command=function(l,m){stage.openPopup(m.extra.popup)};c.extra.popup=createImagePopup(h,d);i.addChild(c)}return i}function createPageSlide(f,l,g){var a=new pppUI.UISlide(l);var p=g.getAttribute("color");var e=$(g).children("title")[0];var h=$(g).children("description")[0];var r="";if(e!=null&&$(e).text()!=null){r=$(e).text()}var i="";if(h!=null&&$(h).text()!=null){i=$(h).text()}var m=$(g).children("images");var b=$(g).children("questions");var c=new pppUI.UIObject("bk");c.position=PAGE_BK_POS;c.$DOMItem.css("background-color",p);a.addChild(c);var j=pppUI.Utils.createTextBox("title",r,"pageTitle",PAGE_TITLE_POS);a.addChild(j);j=pppUI.Utils.createTextBox("txt",i,"",PAGE_TEXT_POS);j.$DOMItem.css("overflow-y","auto");j.$DOMItem.css("padding-right","40px");a.addChild(j);var q=new pppUI.UISlider("imgs");q.transMode=pppUI.UISlider.TRANS_NONE;q.position=PAGE_IMGSLIDER_POS;a.addChild(q);a.onPrepare=function(u){q.current=0;var t=u.getChildById("prev_"+l);if(t!=null){t.visible=false}var s=u.getChildById("next_"+l);if(s!=null){s.visible=(q.count>1)?true:false}};a.onShown=function(u){var s=u.getChildById("txt");pppUI.Utils.showScrollMarker(s,true)};m.children("image").each(function(s,t){var u=createImageslide(q,"slide"+s,t);if(u!=null){q.addSlide(u)}});if(m.children("image").length>1){var n=[{id:"prev_"+l,className:"sliderprevbutton",content:"",visible:false},{id:"next_"+l,className:"slidernextbutton",content:"",visible:(q.count>1?true:false)}];var k=pppUI.Utils.createButtonList(a,PAGE_IMGSLIDER_TOOLBAR_POS,PAGE_IMGSLIDER_TOOLBAR_SEPX,false,n,function(t,u){var s=u.id.substring(4,u.id.length);switch(u.id.substring(0,4)){case"prev":q.prev();if(q.current==0){u.parent.getChildById("prev"+s).visible=false}u.parent.getChildById("next"+s).visible=true;break;case"next":q.next();if(q.current==(q.count-1)){u.parent.getChildById("next"+s).visible=false}u.parent.getChildById("prev"+s).visible=true;break}})}if(b.children("question").length>1){var o=false;b.children("question").each(function(s,t){if(t.getAttribute("visible")=="true"){o=true}});if(o){var d=new pppUI.UIButton("btnPractica","roundtextbutton",pppUI.UIButton.BUTTON,"PRACTICA");d.position=PAGE_BTNPRACTICA_POS;d.extra.popup=createTestPopup("test"+l,b[0],createFragPopup(r,i));d.command=function(s,t){stage.openPopup(t.extra.popup)};a.addChild(d)}}return a}function createPagesSlide(e,a,h,d,g){var b=new pppUI.UISlider(h);b.transMode=pppUI.UISlider.TRANS_NONE;b.position={x:0,y:0,width:pppUI.UIStage.DP_WIDTH,height:pppUI.UIStage.DP_HEIGHT};a.addChild(b);a.onPrepare=function(k){b.current=0;var j=k.getChildById("prev_"+h);if(j!=null){j.visible=false}var i=k.getChildById("next_"+h);if(i!=null){i.visible=(b.count>1)?true:false}};$(d).children("page").each(function(j,k){if($(k).children("description").length>0){var i=createPageSlide(b,"page_"+j,k);b.addSlide(i)}});var c=[{id:"home_"+h,className:"sliderhomebutton",content:"",visible:true},{id:"prev_"+h,className:"sliderprevbutton",content:"",visible:(b.count>0)},{id:"next_"+h,className:"slidernextbutton",content:"",visible:(b.count>1?true:false)}];var f=pppUI.Utils.createButtonList(a,PAGE_TOOLBAR_POS,PAGE_TOOLBAR_SEPX,false,c,function(j,k){var i=k.id.substring(4,k.id.length);switch(k.id.substring(0,4)){case"home":e.current=g;break;case"prev":b.prev();if(b.current==0){k.parent.getChildById("prev"+i).visible=false}k.parent.getChildById("next"+i).visible=true;break;case"next":b.next();if(b.current==(b.count-1)){k.parent.getChildById("next"+i).visible=false}k.parent.getChildById("prev"+i).visible=true;break}})}function createMenuButton(e,c){var b={fontSize:true};var d=TLF.isTLF(c);if(d){c=TLF.toHTML(c,function(f){pppPreloader.from("data",FUtils.realResourcePath(f));FUtils.addImageToPreloader("data",FUtils.realResourcePath(f))},b)}c=c.replace("</span><span","</span><br/><span");c="<table style='width: 100%; height: 100%; line-height: normal; padding-left: 10px; padding-right: 10px;'><tr style='vertical-align: middle;'><td style='vertical-align: middle; text-align: center;'>"+c+"</td></tr></table>";var a=new pppUI.UIButton(e,"roundtextbutton",pppUI.UIButton.BUTTON,c);if(d){a.addClass("tlfText")}return a}function fillInMenu(m,f,a,n){var c=$(a).children("main")[0];var j=$($(c).children("title")[0]).text();var k=$($(c).children("footer")[0]).text();var l=$(a).children("sections")[0];var i=$(l).children("section");var h=f.index;var g=c.getAttribute("layout");var b=30;var d=new pppUI.UISimpleText("title","slideTitle",j);d.alignMode=pppUI.UISimpleText.ALIGN_CENTER|pppUI.UISimpleText.ALIGN_MIDDLE;d.position=MAIN_TITLE_POS;f.addChild(d);i.each(function(u,p){var v=new pppUI.UISlide("sub_"+u);var w=m.addSlide(v);var s;var q=$($(p).children("menuImage")[0]).children("title").text();s=createMenuButton("btn"+u,q);s.command=function(x,y){m.current=w};s.x=LAYOUTS[g].positions[u].x;s.y=LAYOUTS[g].positions[u].y+b;s.width=LAYOUTS[g].width;s.height=LAYOUTS[g].height;f.addChild(s);var t=(p.getAttribute("hasSubsections")=="true");if(t){var r=$(p).children("submenu")[0];fillInMenu(m,v,r,h)}else{var o=$(p).children("pages")[0];createPagesSlide(m,v,"page"+u,o,h)}});if(n!=-1){var e=new pppUI.UIButton("back","sliderhomebutton",pppUI.UIButton.BUTTON,"");e.position=SUBMENU_BUT_POS;e.command=function(o,p){m.current=n};f.addChild(e)}}function main(b){var a=true;if(window.hasOwnProperty("pppUIScaled")){a=window.pppUIScaled}stage=new pppUI.UIStage("__stage","diaporama_container",a,false,function(c){var f=$(b).children("engine")[0];c.addClass("MainBk");var e=new pppUI.UISlider("mainSlider");e.position={x:0,y:0,width:pppUI.UIStage.DP_WIDTH,height:pppUI.UIStage.DP_HEIGHT};e.transMode=pppUI.UISlider.TRANS_NONE;e.addClass("bkWhite");c.addChild(e);var g=new pppUI.UISlide("main");g.visible=true;e.addSlide(g);fillInMenu(e,g,f,-1);var d=new pppUI.UIObject("watermark");d.addClass("watermark");d.position=WATERMARK_POS;c.addChild(d);if(window.hasOwnProperty("MathJax")){MathJax.Hub.Queue(["Typeset",MathJax.Hub])}FUtils.preloadImages(function(h){pppSpinner.hide()})})};